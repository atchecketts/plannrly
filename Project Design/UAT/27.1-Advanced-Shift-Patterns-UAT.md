# UAT: Feature 27.1 - Advanced Shift Patterns

## Test Environment Setup

**Prerequisites:**
- Admin user with scheduling permissions
- Multiple employees available for shift assignment
- Department and location data configured
- Business roles configured for shift assignments
- Existing simple shifts for comparison

**Test URL:** `/shifts`, `/rotations`

---

## Test Cases

### TC-27.1.1: Create Split Shift

**Steps:**
1. Log in as admin
2. Navigate to shift creation
3. Select "Split Shift" type
4. Enter first segment: 8:00 AM - 12:00 PM
5. Enter second segment: 4:00 PM - 8:00 PM
6. Assign to an employee
7. Save the shift

**Expected Results:**
- [ ] Split shift option is available
- [ ] Can enter multiple time segments
- [ ] Break between segments is calculated
- [ ] Shift saves successfully
- [ ] Both segments are linked
- [ ] Total hours are calculated correctly

---

### TC-27.1.2: View Split Shift on Schedule

**Steps:**
1. Create a split shift
2. Navigate to the schedule calendar
3. Find the date with the split shift

**Expected Results:**
- [ ] Split shift displays correctly on calendar
- [ ] Both segments are visible
- [ ] Clear indication this is a split shift
- [ ] Shows total hours for the day
- [ ] Break time is indicated

---

### TC-27.1.3: Create Overnight Shift

**Steps:**
1. Log in as admin
2. Create a new shift
3. Set start time: 10:00 PM on Day 1
4. Set end time: 6:00 AM on Day 2
5. Assign to employee
6. Save the shift

**Expected Results:**
- [ ] System handles overnight shift correctly
- [ ] End time recognized as next day
- [ ] Hours calculated correctly (8 hours)
- [ ] "Crosses midnight" indicator shown
- [ ] Shift saves successfully

---

### TC-27.1.4: View Overnight Shift on Calendar

**Steps:**
1. Create an overnight shift
2. Navigate to schedule calendar
3. View Day 1 and Day 2

**Expected Results:**
- [ ] Shift appears on starting day
- [ ] Clear visual indication of overnight shift
- [ ] End time shows correct next-day date
- [ ] No duplicate entry on Day 2

---

### TC-27.1.5: Create On-Call Shift

**Steps:**
1. Log in as admin
2. Create a new shift
3. Select "On-Call" shift type
4. Set on-call period: 6:00 PM - 6:00 AM
5. Configure on-call pay rate (if applicable)
6. Assign to employee
7. Save the shift

**Expected Results:**
- [ ] On-call option is available
- [ ] On-call shifts have distinct configuration
- [ ] Pay rate/multiplier can be set
- [ ] Shift saves successfully
- [ ] On-call indicator is applied

---

### TC-27.1.6: On-Call Shift Display

**Steps:**
1. Create an on-call shift
2. View the schedule
3. Check employee view

**Expected Results:**
- [ ] On-call shift has distinct styling
- [ ] Different color or icon than regular shifts
- [ ] Employee can see they are on-call
- [ ] Clear differentiation from active shifts

---

### TC-27.1.7: Create Rotation Schedule

**Steps:**
1. Log in as admin
2. Navigate to Rotation Management
3. Click "Create Rotation Schedule"
4. Set rotation name: "Week A/B Rotation"
5. Define Week A pattern (e.g., Mon-Wed)
6. Define Week B pattern (e.g., Thu-Sat)
7. Set rotation length: 2 weeks
8. Save rotation

**Expected Results:**
- [ ] Rotation schedule form loads
- [ ] Can define multiple week patterns
- [ ] Rotation length is configurable
- [ ] Schedule saves successfully
- [ ] Rotation appears in rotation list

---

### TC-27.1.8: Assign Employees to Rotation

**Steps:**
1. Open a saved rotation schedule
2. Click "Assign Employees"
3. Select multiple employees
4. Set start date for each employee's rotation
5. Save assignments

**Expected Results:**
- [ ] Can select multiple employees
- [ ] Can set staggered start dates
- [ ] Assignments save successfully
- [ ] Employees appear in rotation roster
- [ ] Each employee's current rotation week is shown

---

### TC-27.1.9: Generate Shifts from Rotation

**Steps:**
1. Open a rotation with assigned employees
2. Select date range: next 4 weeks
3. Click "Generate Shifts"
4. Review generated shifts
5. Confirm and publish

**Expected Results:**
- [ ] Shifts are generated according to pattern
- [ ] Each employee follows their rotation
- [ ] Correct dates and times applied
- [ ] Can review before publishing
- [ ] Shifts appear on schedule after confirm

---

### TC-27.1.10: View Rotation Calendar

**Steps:**
1. Navigate to rotation calendar view
2. Select a rotation schedule
3. View upcoming weeks

**Expected Results:**
- [ ] Calendar shows rotation pattern visually
- [ ] Different weeks are color-coded
- [ ] Employee assignments visible
- [ ] Can see several weeks ahead
- [ ] Current week is highlighted

---

### TC-27.1.11: Edit Rotation Pattern

**Steps:**
1. Open existing rotation schedule
2. Modify a week pattern (add/remove a day)
3. Save changes
4. Regenerate future shifts

**Expected Results:**
- [ ] Pattern can be edited
- [ ] Changes save successfully
- [ ] Existing shifts are not affected
- [ ] Future generated shifts use new pattern
- [ ] Warning shown about existing shifts

---

### TC-27.1.12: Shift Pattern Templates

**Steps:**
1. Navigate to shift pattern templates
2. Create a template: "Morning Shift 6-2"
3. Set default times, break duration, role
4. Save template
5. Use template to create a new shift

**Expected Results:**
- [ ] Can create reusable templates
- [ ] Template saves with all settings
- [ ] Can apply template when creating shift
- [ ] Template values populate the form
- [ ] Can override template values

---

### TC-27.1.13: Employee View of Advanced Shifts

**Steps:**
1. Log in as an employee with advanced shift types
2. View the schedule/calendar

**Expected Results:**
- [ ] All shift types display correctly
- [ ] Split shifts show both segments
- [ ] On-call shifts are clearly marked
- [ ] Overnight shifts show correct times
- [ ] Rotation pattern is visible if applicable

---

### TC-27.1.14: Hours Calculation with Advanced Shifts

**Steps:**
1. Create various shift types for one employee in a week
2. Navigate to timesheet or hours report
3. Review calculated hours

**Expected Results:**
- [ ] Split shift hours calculated correctly
- [ ] Overnight shift hours correct
- [ ] On-call hours tracked separately
- [ ] Total weekly hours accurate
- [ ] Break time excluded from totals

---

### TC-27.1.15: Delete/Cancel Advanced Shift

**Steps:**
1. Find a split shift on the schedule
2. Delete the shift
3. Repeat for overnight and on-call shifts

**Expected Results:**
- [ ] Split shift deletes both segments
- [ ] Overnight shift deletes completely
- [ ] On-call shift deletes correctly
- [ ] Confirmation required before delete
- [ ] Schedule updates immediately

---

## Notes

- Record any bugs or issues found during testing
- Note the browser and device used for testing
- Screenshot any unexpected behavior
- Test timezone handling with overnight shifts
- Test rotation across month boundaries
