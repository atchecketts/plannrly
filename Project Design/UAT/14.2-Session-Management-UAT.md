# UAT: Feature 14.2 - Session Management

## Test Environment Setup

**Prerequisites:**
- User account with multiple active sessions
- Multiple devices/browsers for testing
- Email service configured for notifications

**Test URL:** `/settings/sessions`

---

## Test Cases

### TC-14.2.1: Access Session Management Page

**Steps:**
1. Log in as any user
2. Navigate to account settings
3. Click on "Sessions" or "Active Sessions"

**Expected Results:**
- [ ] Sessions page loads successfully
- [ ] List of active sessions is displayed
- [ ] Page is accessible to all user roles

---

### TC-14.2.2: View Active Sessions List

**Steps:**
1. Log in from multiple devices/browsers
2. Navigate to session management page

**Expected Results:**
- [ ] All active sessions are listed
- [ ] Sessions show device type (desktop/mobile)
- [ ] Sessions show browser information
- [ ] Sessions show IP address
- [ ] Sessions show last active time

---

### TC-14.2.3: Current Session Highlighted

**Steps:**
1. Log in and navigate to sessions page
2. Identify current session in the list

**Expected Results:**
- [ ] Current session is clearly marked
- [ ] Shows "Current session" badge or indicator
- [ ] Visually distinct from other sessions
- [ ] Cannot log out current session from this view

---

### TC-14.2.4: Session Location Display

**Steps:**
1. Log in from different locations (or use VPN)
2. View session list

**Expected Results:**
- [ ] Location is displayed per session
- [ ] Shows city/region if available
- [ ] Country flag or name shown
- [ ] "Unknown location" for unresolvable IPs

---

### TC-14.2.5: Session Device Details

**Steps:**
1. Log in from different devices
2. View session list

**Expected Results:**
- [ ] Device type icon shown (desktop, mobile, tablet)
- [ ] Operating system displayed
- [ ] Browser name and version shown
- [ ] Information is accurate

---

### TC-14.2.6: Remote Logout Single Session

**Steps:**
1. Log in from Device A and Device B
2. On Device A, navigate to sessions
3. Click "Log out" on Device B's session
4. Attempt to perform action on Device B

**Expected Results:**
- [ ] Logout button works for other sessions
- [ ] Session is terminated immediately
- [ ] Device B is logged out
- [ ] Device B redirected to login page

---

### TC-14.2.7: Log Out All Other Sessions

**Steps:**
1. Log in from multiple devices
2. On one device, navigate to sessions
3. Click "Log out all other sessions"
4. Confirm action

**Expected Results:**
- [ ] "Log out all other sessions" button available
- [ ] Confirmation is required
- [ ] All other sessions are terminated
- [ ] Current session remains active
- [ ] Other devices redirected to login

---

### TC-14.2.8: Email Notification on New Device Login

**Steps:**
1. Configure notifications for new device login
2. Log in from a new device/browser
3. Check email inbox

**Expected Results:**
- [ ] Email notification is sent
- [ ] Email shows device details
- [ ] Email shows login time and location
- [ ] "Not you?" action link provided

---

### TC-14.2.9: Session Timeout Behavior

**Steps:**
1. Configure session timeout (e.g., 30 minutes)
2. Log in and remain idle past timeout period
3. Attempt to perform an action

**Expected Results:**
- [ ] Session expires after timeout
- [ ] User is redirected to login
- [ ] Appropriate message shown
- [ ] Previous page URL preserved for redirect

---

### TC-14.2.10: Tenant Session Timeout Configuration

**Steps:**
1. Log in as tenant admin
2. Navigate to tenant security settings
3. Configure session timeout value
4. Save and verify

**Expected Results:**
- [ ] Session timeout is configurable per tenant
- [ ] Settings save successfully
- [ ] New timeout applies to all tenant users
- [ ] Reasonable min/max limits enforced

---

### TC-14.2.11: Session Created on Login

**Steps:**
1. Log in to the application
2. Navigate to sessions page

**Expected Results:**
- [ ] New session is created on login
- [ ] Session appears in list immediately
- [ ] Correct device details captured
- [ ] Login time is accurate

---

### TC-14.2.12: Session Updated on Activity

**Steps:**
1. Log in and note "last active" time
2. Perform some actions in the app
3. Refresh sessions page

**Expected Results:**
- [ ] Last active time updates
- [ ] Reflects recent activity
- [ ] Idle sessions show older timestamps

---

### TC-14.2.13: Cannot Log Out Current Session

**Steps:**
1. Navigate to sessions page
2. Attempt to log out current session

**Expected Results:**
- [ ] Current session logout is disabled OR
- [ ] Clicking logout on current redirects to regular logout
- [ ] Prevents confusing behavior

---

### TC-14.2.14: Session Persistence After Password Change

**Steps:**
1. Log in from multiple devices
2. Change password on one device
3. Check if other sessions remain active

**Expected Results:**
- [ ] Behavior matches security policy
- [ ] Either all other sessions terminated OR
- [ ] Sessions remain but require re-authentication
- [ ] Clear documentation of expected behavior

---

### TC-14.2.15: Empty Sessions List

**Steps:**
1. Log out all sessions
2. Log in fresh
3. View sessions page

**Expected Results:**
- [ ] Shows only current session
- [ ] No empty state errors
- [ ] Clear message if only one session

---

## Notes

- Record any bugs or issues found during testing
- Note the browser and device used for testing
- Screenshot any unexpected behavior
- Test across different browsers (Chrome, Firefox, Safari)
