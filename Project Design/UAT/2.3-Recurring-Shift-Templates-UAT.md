# UAT: Feature 2.3 - Recurring Shift Templates

## Feature Status: Complete (January 2026)

## Test Environment Setup

**Prerequisites:**
- One admin user
- Multiple employees with various business roles
- Access to shift creation modal
- Empty schedule for testing recurring pattern generation

**Test URL:** `/schedule`

**Implementation Notes:**
- Recurrence options appear when creating a new shift (toggle to enable)
- Frequency options: Daily, Weekly, Monthly
- End conditions: Never (auto-extends), On date, After N occurrences
- Edit scope: "This shift only" or "This and all future shifts"
- Delete scope: Same as edit scope
- Visual indicator: Refresh icon on recurring shifts
- Daily command `shifts:extend-recurring` extends generation window

---

## Test Cases

### TC-2.3.1: Create Daily Recurring Shift

**Steps:**
1. Log in as an admin
2. Navigate to schedule view
3. Open shift creation modal
4. Fill in shift details (employee, role, times)
5. Enable recurrence
6. Select "Daily" recurrence pattern
7. Set end date (2 weeks from now)
8. Save the shift

**Expected Results:**
- [ ] Recurrence options are visible in modal
- [ ] "Daily" option creates shift for every day
- [ ] All shifts are created up to end date
- [ ] Each shift has correct times
- [ ] Shifts appear on the schedule

---

### TC-2.3.2: Create Weekly Recurring Shift

**Steps:**
1. Log in as an admin
2. Open shift creation modal
3. Fill in shift details
4. Enable recurrence
5. Select "Weekly" pattern
6. Choose specific days (e.g., Mon, Wed, Fri)
7. Set recurrence count (e.g., 4 weeks)
8. Save

**Expected Results:**
- [ ] Can select multiple days of week
- [ ] Shifts created only on selected days
- [ ] Correct number of weeks generated
- [ ] Each occurrence has same times and role

---

### TC-2.3.3: Create Bi-Weekly Recurring Shift

**Steps:**
1. Log in as an admin
2. Open shift creation modal
3. Enable recurrence
4. Select "Every 2 weeks" or "Bi-weekly"
5. Choose day(s)
6. Set end date
7. Save

**Expected Results:**
- [ ] Bi-weekly option is available
- [ ] Shifts created every other week
- [ ] Pattern is consistent
- [ ] Correct dates are generated

---

### TC-2.3.4: Create Monthly Recurring Shift

**Steps:**
1. Log in as an admin
2. Open shift creation modal
3. Enable recurrence
4. Select "Monthly" pattern
5. Choose "Same day of month" (e.g., 15th)
6. Set duration (e.g., 6 months)
7. Save

**Expected Results:**
- [ ] Monthly option available
- [ ] Shift created on same date each month
- [ ] Handles months with fewer days appropriately
- [ ] Correct number of occurrences

---

### TC-2.3.5: Edit Single Instance of Recurring Shift

**Steps:**
1. Log in as an admin
2. Find a shift that is part of a recurring series
3. Click to edit that specific shift
4. Change the time
5. Choose "Edit this occurrence only"
6. Save

**Expected Results:**
- [ ] Option to edit single instance vs all
- [ ] Only the selected shift is modified
- [ ] Other occurrences remain unchanged
- [ ] Edited shift may show as "modified" indicator

---

### TC-2.3.6: Edit All Instances of Recurring Shift

**Steps:**
1. Log in as an admin
2. Find a shift in a recurring series
3. Click to edit
4. Change the start time
5. Choose "Edit all occurrences"
6. Save

**Expected Results:**
- [ ] All future occurrences are updated
- [ ] Past occurrences may remain unchanged (or configurable)
- [ ] New time applied to all affected shifts
- [ ] Confirmation shows count of affected shifts

---

### TC-2.3.7: Delete Single Instance of Recurring Shift

**Steps:**
1. Log in as an admin
2. Find a recurring shift
3. Click to delete
4. Choose "Delete this occurrence only"
5. Confirm deletion

**Expected Results:**
- [ ] Option to delete single vs all
- [ ] Only selected shift is deleted
- [ ] Other occurrences remain
- [ ] Gap appears in the series

---

### TC-2.3.8: Delete All Instances of Recurring Shift

**Steps:**
1. Log in as an admin
2. Find a recurring shift
3. Click to delete
4. Choose "Delete all occurrences"
5. Confirm deletion

**Expected Results:**
- [ ] All shifts in the series are deleted
- [ ] Confirmation dialog shows count
- [ ] Schedule is cleared of all occurrences
- [ ] Success message displayed

---

### TC-2.3.9: Delete Future Instances Only

**Steps:**
1. Log in as an admin
2. Find a recurring shift with past and future occurrences
3. Click to delete
4. Choose "Delete this and all future occurrences"
5. Confirm

**Expected Results:**
- [ ] Past occurrences remain intact
- [ ] Current and future occurrences deleted
- [ ] Historical data preserved

---

### TC-2.3.10: Recurrence Conflict Detection

**Steps:**
1. Log in as an admin
2. Ensure employee has a shift on Wednesday
3. Try to create weekly recurring shift for same employee/time including Wednesday

**Expected Results:**
- [ ] Conflict detected during creation
- [ ] Warning shows which dates have conflicts
- [ ] Option to skip conflicts or cancel
- [ ] No duplicate/overlapping shifts created

---

### TC-2.3.11: Recurrence End Date Validation

**Steps:**
1. Log in as an admin
2. Open shift creation with recurrence
3. Try to set end date in the past
4. Try to set end date more than 1 year ahead

**Expected Results:**
- [ ] Past end date is rejected
- [ ] Reasonable maximum duration enforced
- [ ] Clear validation messages
- [ ] Valid date ranges accepted

---

### TC-2.3.12: View Recurring Shift Indicator

**Steps:**
1. Log in as an admin
2. Create a recurring shift
3. View the shifts on schedule

**Expected Results:**
- [ ] Recurring shifts have visual indicator (icon)
- [ ] Indicator distinguishes from one-time shifts
- [ ] Tooltip or detail shows recurrence pattern
- [ ] Can identify series membership

---

### TC-2.3.13: Employee Role Change Impact

**Steps:**
1. Log in as an admin
2. Create recurring shift for Employee A with role "Waiter"
3. Remove "Waiter" role from Employee A
4. Check future recurring shifts

**Expected Results:**
- [ ] Future shifts may be flagged as invalid
- [ ] Warning shown about role incompatibility
- [ ] Existing shifts handled appropriately
- [ ] Option to reassign or delete invalid shifts

---

### TC-2.3.14: Break Recurrence Link

**Steps:**
1. Log in as an admin
2. Find a recurring shift
3. Edit it and choose option to "Break recurrence link"
4. Save as standalone shift

**Expected Results:**
- [ ] Shift becomes standalone
- [ ] No longer part of series
- [ ] Other occurrences remain linked
- [ ] Recurrence indicator removed

---

### TC-2.3.15: Recurrence Pattern Display

**Steps:**
1. Log in as an admin
2. Click on a recurring shift to view details

**Expected Results:**
- [ ] Shows recurrence pattern (e.g., "Every Monday, Wednesday")
- [ ] Shows end date or total occurrences
- [ ] Shows occurrence number (e.g., "3 of 12")
- [ ] Link to view all occurrences

---

## Notes

- Record any bugs or issues found during testing
- Note the browser and device used for testing
- Screenshot any unexpected behavior
- Test edge cases like month boundaries and leap years
