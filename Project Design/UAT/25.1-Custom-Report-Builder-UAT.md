# UAT: Feature 25.1 - Custom Report Builder

## Test Environment Setup

**Prerequisites:**
- One admin user with report creation permissions
- One business admin user
- Sample data: employees, shifts, leave requests, timesheets
- At least 3 months of historical data for trend reports
- Email configured for scheduled report delivery

**Test URL:** `/reports/builder`

---

## Test Cases

### TC-25.1.1: Access Report Builder (Admin)

**Steps:**
1. Log in as an admin user
2. Navigate to Reports section
3. Click "Create Custom Report" or similar

**Expected Results:**
- [ ] Report builder page loads successfully
- [ ] Drag-and-drop interface is visible
- [ ] Available data sources are listed
- [ ] Column selector is visible

---

### TC-25.1.2: Access Denied for Employees

**Steps:**
1. Log in as a regular employee
2. Attempt to navigate to `/reports/builder` directly

**Expected Results:**
- [ ] Access is denied
- [ ] Shows appropriate error message or redirects
- [ ] Employee cannot create custom reports

---

### TC-25.1.3: Select Data Source

**Steps:**
1. Log in as an admin
2. Navigate to report builder
3. Select "Employees" as the data source
4. Change to "Shifts" data source
5. Change to "Leave Requests" data source

**Expected Results:**
- [ ] Available columns update based on data source
- [ ] Can switch between data sources
- [ ] Previous selections are cleared when changing source
- [ ] Related fields from relationships are available

---

### TC-25.1.4: Drag-and-Drop Column Selection

**Steps:**
1. Create a new employee report
2. Drag "Name" column to the report canvas
3. Drag "Email" column to the report canvas
4. Drag "Department" column to the report canvas
5. Reorder columns by dragging
6. Remove a column by dragging it out or clicking remove

**Expected Results:**
- [ ] Columns can be dragged from available list
- [ ] Columns appear in report preview
- [ ] Column order can be changed
- [ ] Columns can be removed
- [ ] Visual feedback during drag operations

---

### TC-25.1.5: Add Filters to Report

**Steps:**
1. Create a shift report
2. Add filter: "Date" is "This Month"
3. Add filter: "Department" equals "Sales"
4. Add filter: "Status" equals "Published"
5. Preview the report

**Expected Results:**
- [ ] Multiple filters can be added
- [ ] Filter conditions work correctly (equals, contains, greater than, etc.)
- [ ] Date range filters work (this week, this month, custom range)
- [ ] Preview shows filtered data
- [ ] Filter count is displayed

---

### TC-25.1.6: Grouping and Aggregation

**Steps:**
1. Create a shift report
2. Add "Department" as a grouping field
3. Add "Hours" with SUM aggregation
4. Add "Shift Count" with COUNT aggregation
5. Preview the report

**Expected Results:**
- [ ] Data is grouped by department
- [ ] Sum of hours shows correctly per group
- [ ] Count shows correctly per group
- [ ] Group totals are accurate
- [ ] Grand total row appears at bottom

---

### TC-25.1.7: Chart Visualization - Table

**Steps:**
1. Create a report with data
2. Select "Table" visualization
3. Preview the report

**Expected Results:**
- [ ] Data displays in tabular format
- [ ] Columns are properly aligned
- [ ] Headers are visible
- [ ] Rows are readable

---

### TC-25.1.8: Chart Visualization - Bar Chart

**Steps:**
1. Create a report with grouped data (e.g., shifts by department)
2. Select "Bar Chart" visualization
3. Preview the report

**Expected Results:**
- [ ] Bar chart renders correctly
- [ ] Axis labels are visible
- [ ] Bars represent correct values
- [ ] Legend is displayed
- [ ] Hover shows data values

---

### TC-25.1.9: Chart Visualization - Line Chart

**Steps:**
1. Create a time-series report (e.g., hours worked per week)
2. Select "Line Chart" visualization
3. Preview the report

**Expected Results:**
- [ ] Line chart renders correctly
- [ ] Time axis is properly formatted
- [ ] Trend line is smooth
- [ ] Data points are visible

---

### TC-25.1.10: Chart Visualization - Pie Chart

**Steps:**
1. Create a report with category distribution (e.g., leave types)
2. Select "Pie Chart" visualization
3. Preview the report

**Expected Results:**
- [ ] Pie chart renders correctly
- [ ] Segments are proportional to data
- [ ] Legend shows all categories
- [ ] Percentages are displayed

---

### TC-25.1.11: Export to PDF

**Steps:**
1. Create and preview a report
2. Click "Export to PDF" button
3. Open the downloaded file

**Expected Results:**
- [ ] PDF downloads successfully
- [ ] Report title appears in PDF
- [ ] Data is formatted correctly
- [ ] Charts render in PDF
- [ ] Date/time of generation is included

---

### TC-25.1.12: Export to Excel

**Steps:**
1. Create and preview a report
2. Click "Export to Excel" button
3. Open the downloaded file

**Expected Results:**
- [ ] Excel file downloads successfully
- [ ] Column headers are present
- [ ] Data is in correct columns
- [ ] Numeric data is formatted as numbers
- [ ] Dates are formatted correctly

---

### TC-25.1.13: Save Custom Report

**Steps:**
1. Create a report with columns, filters, and visualization
2. Enter a report name "Monthly Hours Report"
3. Add an optional description
4. Click Save
5. Navigate away and return to saved reports

**Expected Results:**
- [ ] Report saves successfully
- [ ] Success message is shown
- [ ] Report appears in saved reports list
- [ ] Report name and description are displayed

---

### TC-25.1.14: Load and Edit Saved Report

**Steps:**
1. Navigate to saved reports
2. Click on a previously saved report
3. Modify the filters
4. Add a new column
5. Save changes

**Expected Results:**
- [ ] Saved report loads with all previous settings
- [ ] Can modify filters
- [ ] Can add/remove columns
- [ ] Changes can be saved
- [ ] Original report is updated

---

### TC-25.1.15: Schedule Report Delivery

**Steps:**
1. Create or open a saved report
2. Click "Schedule Delivery"
3. Select frequency: Daily, Weekly, or Monthly
4. Enter recipient email addresses
5. Set delivery time
6. Save schedule

**Expected Results:**
- [ ] Schedule options are available
- [ ] Multiple email recipients can be added
- [ ] Frequency options work correctly
- [ ] Schedule is saved
- [ ] Confirmation message appears

---

## Notes

- Record any bugs or issues found during testing
- Note the browser and device used for testing
- Screenshot any unexpected behavior
- Test with large datasets to verify performance
