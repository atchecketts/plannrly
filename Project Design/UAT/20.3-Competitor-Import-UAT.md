# UAT: Feature 20.3 - Competitor Import

## Test Environment Setup

**Prerequisites:**
- Admin user with import permissions
- Export files from Deputy (if available)
- Export files from When I Work (if available)
- Export files from 7shifts (if available)
- Knowledge of expected data formats from each competitor

**Test URL:** `/import/competitor`

---

## Test Cases

### TC-20.3.1: View Competitor Import Page

**Steps:**
1. Log in as an admin
2. Navigate to Settings > Import Data > Import from Other Systems

**Expected Results:**
- [ ] Page loads successfully
- [ ] List of supported competitor systems shown
- [ ] Each competitor has a description/icon
- [ ] Clear instructions for each system

---

### TC-20.3.2: Select Deputy Import

**Steps:**
1. Navigate to Competitor Import
2. Select "Deputy" from the list
3. View Deputy-specific instructions

**Expected Results:**
- [ ] Deputy import wizard launches
- [ ] Instructions for exporting from Deputy shown
- [ ] File upload area displayed
- [ ] Supported file types listed

---

### TC-20.3.3: Auto-Detect File Format

**Steps:**
1. Upload a competitor export file without selecting the source
2. Let the system auto-detect the format

**Expected Results:**
- [ ] System correctly identifies the competitor system
- [ ] Shows confirmation: "Detected Deputy export file"
- [ ] Proceeds with appropriate import flow
- [ ] Falls back to manual selection if uncertain

---

### TC-20.3.4: Deputy Data Import - Employees

**Steps:**
1. Upload a Deputy employee export file
2. Review the field mapping
3. Execute the import

**Expected Results:**
- [ ] Deputy fields correctly mapped to Plannrly fields
- [ ] Employee names, emails, phone numbers imported
- [ ] Employment type/status mapped correctly
- [ ] Custom fields handled appropriately

---

### TC-20.3.5: When I Work Data Import - Employees

**Steps:**
1. Select "When I Work" from competitor list
2. Upload When I Work export file
3. Review mapping and import

**Expected Results:**
- [ ] When I Work specific format recognized
- [ ] Employee data imported correctly
- [ ] Position/role mapping available
- [ ] Locations mapped if present

---

### TC-20.3.6: 7shifts Data Import - Employees

**Steps:**
1. Select "7shifts" from competitor list
2. Upload 7shifts export file
3. Review mapping and import

**Expected Results:**
- [ ] 7shifts format recognized
- [ ] Restaurant/location data mapped
- [ ] Employee roles imported
- [ ] Wage information handled (if applicable)

---

### TC-20.3.7: Field Mapping for Competitor Import

**Steps:**
1. Upload a competitor file
2. Review the auto-generated field mapping
3. Modify mappings as needed

**Expected Results:**
- [ ] Competitor-specific fields shown
- [ ] Auto-mapping based on competitor format
- [ ] Unmapped fields clearly indicated
- [ ] Can manually map additional fields

---

### TC-20.3.8: Data Transformation Preview

**Steps:**
1. Upload a competitor file
2. Review the preview before import
3. Check transformed data

**Expected Results:**
- [ ] Preview shows Plannrly format (not raw competitor data)
- [ ] Transformations are applied (e.g., date formats)
- [ ] User can verify data looks correct
- [ ] Warnings for any data that couldn't be transformed

---

### TC-20.3.9: Handle Competitor-Specific Fields

**Steps:**
1. Upload a file with fields unique to the competitor system
2. Review how these fields are handled

**Expected Results:**
- [ ] Unique fields are identified
- [ ] Option to map to custom fields in Plannrly
- [ ] Option to skip non-mappable fields
- [ ] Data is not lost silently

---

### TC-20.3.10: Import Multiple Data Types

**Steps:**
1. Upload a comprehensive competitor export (employees, locations, roles)
2. Review import options
3. Execute full import

**Expected Results:**
- [ ] All data types are processed
- [ ] Import order is correct (locations before employees)
- [ ] Relationships are maintained
- [ ] Summary shows counts for each type

---

### TC-20.3.11: Error Handling for Invalid Competitor File

**Steps:**
1. Upload a file that is not from a supported competitor
2. Or upload a corrupted competitor export

**Expected Results:**
- [ ] Clear error message displayed
- [ ] File format not recognized message
- [ ] Suggestions for correct format
- [ ] Option to try manual import instead

---

### TC-20.3.12: Historical Data Import

**Steps:**
1. If competitor export includes historical schedules
2. Choose to import historical data
3. Execute import

**Expected Results:**
- [ ] Historical schedules imported
- [ ] Dates are preserved correctly
- [ ] Data marked as historical/past
- [ ] No conflicts with future scheduling

---

### TC-20.3.13: Duplicate Detection During Competitor Import

**Steps:**
1. Run a competitor import
2. Run the same import again
3. Check duplicate handling

**Expected Results:**
- [ ] System detects existing employees
- [ ] Options: skip, update, or create duplicate
- [ ] Summary shows duplicates found
- [ ] User has control over outcome

---

### TC-20.3.14: Import Wizard Step-by-Step

**Steps:**
1. Start a competitor import
2. Progress through all wizard steps
3. Complete the import

**Expected Results:**
- [ ] Step 1: Select competitor system
- [ ] Step 2: Upload file(s)
- [ ] Step 3: Review/adjust mapping
- [ ] Step 4: Preview data
- [ ] Step 5: Execute import
- [ ] Each step has clear navigation

---

### TC-20.3.15: Post-Import Verification

**Steps:**
1. Complete a competitor import
2. Navigate to Employees, Locations, Roles
3. Verify imported data

**Expected Results:**
- [ ] All expected employees present
- [ ] Data matches original competitor system
- [ ] Relationships are correct
- [ ] No data corruption or loss

---

## Notes

- Record any bugs or issues found during testing
- Obtain actual export files from competitor systems if possible
- Document any competitor-specific quirks or limitations
- Note differences between competitor data models and Plannrly
