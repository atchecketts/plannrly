# UAT: Feature 1.1 - Shift Swap Views

## Test Environment Setup

**Prerequisites:**
- Two employee users with the same business role
- One employee user with a different business role
- One admin user
- Published shifts assigned to the employees

**Test URL:** `/shift-swaps`

---

## Test Cases

### TC-1.1.1: View Shift Swaps Index (Employee)

**Steps:**
1. Log in as an employee
2. Navigate to "Shift Swaps" in the sidebar

**Expected Results:**
- [ ] Page loads successfully
- [ ] Shows only swap requests where you are the requesting or target user
- [ ] Status tabs are visible (All, Pending, Accepted, Rejected)
- [ ] Each tab shows a count badge

---

### TC-1.1.2: View Shift Swaps Index (Admin)

**Steps:**
1. Log in as an admin
2. Navigate to "Shift Swaps" in the sidebar

**Expected Results:**
- [ ] Page loads successfully
- [ ] Shows ALL swap requests in the organization
- [ ] Status tabs are visible with correct counts
- [ ] Can see requests between any employees

---

### TC-1.1.3: Filter by Status

**Steps:**
1. Log in as an admin
2. Navigate to "Shift Swaps"
3. Click on "Pending" tab
4. Click on "Accepted" tab
5. Click on "Rejected" tab
6. Click on "All" tab

**Expected Results:**
- [ ] Pending tab shows only pending requests
- [ ] Accepted tab shows only accepted requests
- [ ] Rejected tab shows only rejected requests
- [ ] All tab shows all requests
- [ ] Counts update correctly

---

### TC-1.1.4: Create Swap Request (Give Away Shift)

**Steps:**
1. Log in as Employee A (has a published shift)
2. Navigate to Schedule and find your shift
3. Click on the shift and select "Request Swap"
4. Select Employee B (same role) from the dropdown
5. Leave "Their Shift to Take" as "None - just give away my shift"
6. Enter a reason (optional)
7. Click "Send Swap Request"

**Expected Results:**
- [ ] Form shows your shift details
- [ ] Only employees with the same business role appear in dropdown
- [ ] You do not appear in your own dropdown
- [ ] Request is created successfully
- [ ] Redirected to swap index with success message
- [ ] New request appears with "Pending" status

---

### TC-1.1.5: Create Swap Request (Exchange Shifts)

**Steps:**
1. Log in as Employee A (has a published shift)
2. Navigate to create swap request for your shift
3. Select Employee B from the dropdown
4. Select one of Employee B's shifts from "Their Shift to Take"
5. Enter a reason
6. Click "Send Swap Request"

**Expected Results:**
- [ ] Both shifts are shown in the request
- [ ] Request is created successfully
- [ ] Request shows as pending

---

### TC-1.1.6: Cannot Swap to Different Role

**Steps:**
1. Log in as Employee A
2. Try to create a swap request
3. Observe the eligible users dropdown

**Expected Results:**
- [ ] Only users with the SAME business role as the shift appear
- [ ] Users with different roles do NOT appear
- [ ] If you manually submit with wrong user ID, error is shown

---

### TC-1.1.7: Accept Swap Request (Target Employee)

**Steps:**
1. Create a swap request from Employee A to Employee B
2. Log in as Employee B
3. Navigate to Shift Swaps
4. Find the pending request where you are the target
5. Click "Accept"

**Expected Results:**
- [ ] Request status changes to "Accepted"
- [ ] Shows "Awaiting Admin Approval" badge
- [ ] Employee A can see the updated status

---

### TC-1.1.8: Reject Swap Request (Target Employee)

**Steps:**
1. Create a swap request from Employee A to Employee B
2. Log in as Employee B
3. Navigate to Shift Swaps
4. Find the pending request
5. Click "Reject"

**Expected Results:**
- [ ] Request status changes to "Rejected"
- [ ] Employee A can see the rejection

---

### TC-1.1.9: Cancel Swap Request (Requesting Employee)

**Steps:**
1. Log in as Employee A
2. Create a swap request
3. Before it's accepted, click "Cancel"

**Expected Results:**
- [ ] Request status changes to "Cancelled"
- [ ] Request no longer appears in active lists

---

### TC-1.1.10: Admin Approve Swap

**Steps:**
1. Create and accept a swap request (Employee A â†’ Employee B accepts)
2. Log in as Admin
3. Navigate to Shift Swaps
4. Find the "Accepted" request awaiting approval
5. Click "Approve"

**Expected Results:**
- [ ] Swap is executed
- [ ] Employee A's shift is now assigned to Employee B
- [ ] If it was an exchange, Employee B's shift is now assigned to Employee A
- [ ] Success message is shown

---

### TC-1.1.11: Empty State

**Steps:**
1. Log in as a new employee with no swap requests
2. Navigate to Shift Swaps

**Expected Results:**
- [ ] Shows empty state message
- [ ] No errors displayed

---

## Notes

- Record any bugs or issues found during testing
- Note the browser and device used for testing
- Screenshot any unexpected behavior
