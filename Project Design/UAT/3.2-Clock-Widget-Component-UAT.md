# UAT: 3.2 Clock Widget Component

**Feature:** Clock Widget Component
**Status:** Ready for Testing
**Implemented:** 2026-01-29

## Prerequisites

1. User is logged into the application as an Employee
2. Tenant has "Enable Clock In/Out" setting enabled in Settings
3. Employee has at least one published shift assigned for today

## Test Cases

### TC-3.2.1: Widget Shows Current Time

**Steps:**
1. Log in as Employee
2. Navigate to Dashboard
3. Observe the clock widget header

**Expected Result:**
- Real-time clock is displayed in the header (e.g., "10:30:45 AM")
- Clock updates every second

---

### TC-3.2.2: AJAX Clock In (No Page Refresh)

**Preconditions:** Employee has a published shift for today

**Steps:**
1. Navigate to Dashboard
2. Select a shift from the dropdown
3. Click "Clock In" button
4. Observe page behavior

**Expected Result:**
- Page does NOT refresh
- Loading spinner appears on button during request
- Success message appears inline: "Successfully clocked in at [time]."
- Widget transitions to "Clocked In" state
- Elapsed timer starts counting

---

### TC-3.2.3: AJAX Clock Out with Confirmation

**Preconditions:** Employee is clocked in

**Steps:**
1. Click "Clock Out" button
2. Observe confirmation modal
3. Click "Cancel" in modal
4. Click "Clock Out" button again
5. Click "Clock Out" in confirmation modal

**Expected Result:**
- Confirmation modal appears showing elapsed time
- Clicking Cancel closes modal and returns to widget
- Clicking Clock Out in modal processes the clock out
- Success message appears without page refresh
- Widget transitions to "No Shifts Today" or shows next shift

---

### TC-3.2.4: AJAX Start Break

**Preconditions:** Employee is clocked in

**Steps:**
1. Click "Start Break" button
2. Observe widget behavior

**Expected Result:**
- Page does NOT refresh
- Loading spinner appears during request
- Success message: "Break started at [time]."
- Status indicator turns yellow (pulsing)
- Status text shows "On Break"
- Break timer appears and starts counting

---

### TC-3.2.5: AJAX End Break

**Preconditions:** Employee is on break

**Steps:**
1. Click "End Break" button
2. Observe widget behavior

**Expected Result:**
- Page does NOT refresh
- Success message: "Break ended at [time]."
- Status returns to "Clocked In" (green indicator)
- Break timer disappears
- Elapsed timer continues from where it was

---

### TC-3.2.6: Scheduled Time Display

**Preconditions:** Employee is clocked in to a shift

**Steps:**
1. Observe the clocked-in widget state

**Expected Result:**
- Scheduled shift times are displayed (e.g., "Scheduled: 9:00 AM - 5:00 PM")
- Business role is shown if assigned

---

### TC-3.2.7: GPS Required - Widget Behavior

**Preconditions:** "Require GPS Location" is enabled in tenant settings

**Steps:**
1. Log in as Employee
2. Navigate to Dashboard
3. Observe GPS indicator

**Expected Result:**
- "GPS location required" message is displayed
- Status shows "(acquiring...)" initially
- Once acquired, status shows "(acquired)" in green
- Clock In button is disabled until GPS is acquired

---

### TC-3.2.8: GPS Denied - Error State

**Preconditions:** "Require GPS Location" is enabled

**Steps:**
1. Navigate to Dashboard
2. Deny location permission when browser prompts (or block in browser settings)
3. Observe widget

**Expected Result:**
- Status shows "(failed - please enable location)" in red
- Clock In button remains disabled
- User understands they need to enable location

---

### TC-3.2.9: Error Message Display

**Steps:**
1. Clock in successfully
2. Open another tab/window
3. Try to clock in again to a different shift

**Expected Result:**
- Error message appears inline in red: "You are already clocked in."
- Page does NOT refresh
- Error message auto-dismisses after 5 seconds

---

### TC-3.2.10: Loading State on Buttons

**Steps:**
1. Click any action button (Clock In, Clock Out, Start Break, End Break)
2. Observe button during request

**Expected Result:**
- Loading spinner appears on the button
- Button is disabled during request
- Button returns to normal after request completes

---

### TC-3.2.11: Multiple Shifts Selection

**Preconditions:** Employee has multiple shifts scheduled for today

**Steps:**
1. Navigate to Dashboard
2. Observe shift dropdown

**Expected Result:**
- Dropdown shows all available shifts for today
- Each option shows time range and business role
- First shift is pre-selected
- Can select different shift before clocking in

---

### TC-3.2.12: No Shifts State

**Preconditions:** Employee has no published shifts for today

**Steps:**
1. Navigate to Dashboard
2. Observe clock widget

**Expected Result:**
- Shows "No Shifts Today" message
- Shows "You don't have any shifts scheduled for today."
- No clock in button is displayed

---

### TC-3.2.13: Widget Persists State on Page Load

**Steps:**
1. Clock in via the widget
2. Navigate to another page
3. Return to Dashboard

**Expected Result:**
- Widget correctly shows "Clocked In" state
- Elapsed timer shows correct time since clock in
- All buttons work correctly without needing to refresh

---

### TC-3.2.14: Break Timer Accuracy

**Preconditions:** Employee is clocked in

**Steps:**
1. Start a break
2. Note the time
3. Wait 1 minute
4. End the break

**Expected Result:**
- Break timer shows approximately 1m elapsed
- Timer updates every second during break
- After ending break, break time is no longer displayed

---

### TC-3.2.15: Elapsed Timer Continues Across Break

**Preconditions:** Employee is clocked in

**Steps:**
1. Note elapsed time before break
2. Start a break
3. Wait 30 seconds
4. End break
5. Observe elapsed timer

**Expected Result:**
- Total elapsed timer continues counting during break
- Timer does not reset or pause during break period

---

## Verification Checklist

| Test Case | Pass | Fail | Notes |
|-----------|------|------|-------|
| TC-3.2.1 Current Time | | | |
| TC-3.2.2 AJAX Clock In | | | |
| TC-3.2.3 Clock Out Confirmation | | | |
| TC-3.2.4 AJAX Start Break | | | |
| TC-3.2.5 AJAX End Break | | | |
| TC-3.2.6 Scheduled Time | | | |
| TC-3.2.7 GPS Required | | | |
| TC-3.2.8 GPS Denied | | | |
| TC-3.2.9 Error Message | | | |
| TC-3.2.10 Loading States | | | |
| TC-3.2.11 Multiple Shifts | | | |
| TC-3.2.12 No Shifts State | | | |
| TC-3.2.13 State Persistence | | | |
| TC-3.2.14 Break Timer | | | |
| TC-3.2.15 Elapsed Across Break | | | |

## Sign-off

**Tested By:** _______________________
**Date:** _______________________
**Result:** [ ] Pass  [ ] Fail  [ ] Partial
**Notes:**
