# UAT: Feature 7.3 - Schedule Analysis and Recommendations

## Test Environment Setup

**Prerequisites:**
- Admin user with AI Scheduling feature enabled
- Employees with target hours configured
- Schedule with various staffing levels
- Employees approaching max hours (for overtime testing)
- Some shifts with availability conflicts
- Varied schedule quality for testing analysis

**Test URL:** `/schedule` (analysis panel), `/schedule/ai/analyze`

---

## Test Cases

### TC-7.3.1: Access Schedule Analysis

**Steps:**
1. Log in as admin with AI feature enabled
2. Navigate to Schedule view
3. Look for "Analysis" or "Recommendations" panel/button

**Expected Results:**
- [ ] Analysis feature is accessible
- [ ] Panel or tab shows analysis options
- [ ] Can trigger schedule analysis
- [ ] Feature is visible only when AI enabled

---

### TC-7.3.2: Identify Understaffed Periods

**Steps:**
1. Create schedule with some time periods having few or no staff
2. Run schedule analysis

**Expected Results:**
- [ ] Understaffed periods are identified
- [ ] Shows specific times and dates
- [ ] Indicates how many more staff needed
- [ ] Compares to recommended staffing levels

---

### TC-7.3.3: Identify Overstaffed Periods

**Steps:**
1. Create schedule with excessive staffing for some periods
2. Run schedule analysis

**Expected Results:**
- [ ] Overstaffed periods are highlighted
- [ ] Shows excess staff count
- [ ] May suggest reassignment or shift removal
- [ ] Considers demand patterns if available

---

### TC-7.3.4: Flag Overtime Risks

**Steps:**
1. Set employee with 40 max hours
2. Schedule them for 38 hours
3. Create additional shift they could be assigned
4. Run schedule analysis

**Expected Results:**
- [ ] Overtime risk is flagged for the employee
- [ ] Shows current hours vs maximum
- [ ] Warns about potential overtime cost
- [ ] Suggests alternative assignments

---

### TC-7.3.5: Highlight Availability Conflicts

**Steps:**
1. Assign shift to employee during their "If Needed" time
2. Run schedule analysis

**Expected Results:**
- [ ] Availability conflict is highlighted
- [ ] Shows preference level mismatch
- [ ] May suggest reassignment to willing employee
- [ ] Does not flag hard constraint violations (those should not exist)

---

### TC-7.3.6: Target Hours Progress Dashboard

**Steps:**
1. Log in as admin
2. Navigate to schedule analysis
3. View target hours tracking section

**Expected Results:**
- [ ] Shows each employee's target hours
- [ ] Shows current scheduled hours
- [ ] Visual progress bar or percentage
- [ ] Highlights those significantly under/over target

---

### TC-7.3.7: Employee Target Hours Detail

**Steps:**
1. Click on an employee in target hours dashboard
2. View detailed breakdown

**Expected Results:**
- [ ] Shows target vs actual hours
- [ ] Shows week-by-week breakdown
- [ ] Highlights weeks under or over target
- [ ] Link to adjust schedule if needed

---

### TC-7.3.8: Schedule Quality Score Display

**Steps:**
1. Run schedule analysis
2. View overall quality score

**Expected Results:**
- [ ] Overall score is displayed (0-100 or percentage)
- [ ] Score breakdown by category
- [ ] Comparison to previous periods (if available)
- [ ] Clear indication of good/moderate/poor

---

### TC-7.3.9: Quality Score Categories

**Steps:**
1. View schedule quality score breakdown

**Expected Results:**
- [ ] Coverage score (are all shifts filled)
- [ ] Fairness score (distribution equity)
- [ ] Preference score (respecting availability preferences)
- [ ] Overtime score (minimizing excess hours)
- [ ] Each category has explanation

---

### TC-7.3.10: Recommendations Panel

**Steps:**
1. Run schedule analysis
2. View recommendations panel

**Expected Results:**
- [ ] Actionable recommendations are listed
- [ ] Each recommendation has clear description
- [ ] Priority or impact level is shown
- [ ] Can click to take action on recommendation

---

### TC-7.3.11: Auto-Apply Recommendation

**Steps:**
1. View a recommendation (e.g., "Move shift from X to Y")
2. Click "Apply" or "Fix" button

**Expected Results:**
- [ ] Recommendation is applied
- [ ] Schedule updates accordingly
- [ ] Confirmation message shown
- [ ] Quality score may improve

---

### TC-7.3.12: Dismiss Recommendation

**Steps:**
1. View a recommendation
2. Click "Dismiss" or "Ignore"

**Expected Results:**
- [ ] Recommendation is removed from list
- [ ] May ask for reason (optional)
- [ ] Does not affect schedule
- [ ] May not reappear for same issue

---

### TC-7.3.13: Gap Analysis Visualization

**Steps:**
1. Run schedule analysis
2. View gap analysis chart/visualization

**Expected Results:**
- [ ] Visual representation of coverage gaps
- [ ] Timeline shows staffing levels
- [ ] Gaps are highlighted
- [ ] Easy to identify problem periods

---

### TC-7.3.14: Overtime Prediction

**Steps:**
1. View analysis for upcoming week
2. Check overtime predictions

**Expected Results:**
- [ ] Predicts which employees may hit overtime
- [ ] Shows projected hours vs maximum
- [ ] Suggests schedule adjustments
- [ ] Updates as schedule changes

---

### TC-7.3.15: Analysis Export

**Steps:**
1. Generate schedule analysis
2. Click export option

**Expected Results:**
- [ ] Can export analysis report
- [ ] PDF or CSV format available
- [ ] Includes quality scores and recommendations
- [ ] Suitable for management review

---

## Notes

- Record any bugs or issues found during testing
- Note the browser and device used for testing
- Screenshot any unexpected behavior
- Test with various schedule complexities
- Verify recommendations are actionable and helpful
- Check performance with large employee counts
