# UAT: Feature 4.3 - In-App Notifications UI

## Test Environment Setup

**Prerequisites:**
- Admin and employee user accounts
- Active notification system (from Feature 4.1)
- Multiple notification events triggered (shifts, leaves, swaps)
- Some read and unread notifications existing

**Test URLs:**
- Dashboard: `/dashboard`
- Notifications Index: `/notifications`

---

## Test Cases

### TC-4.3.1: Notification Bell in Header

**Steps:**
1. Log in as any user
2. Look at the header/navigation area

**Expected Results:**
- [ ] Notification bell icon visible
- [ ] Bell is easily identifiable
- [ ] Positioned consistently across pages
- [ ] Clickable/tappable

---

### TC-4.3.2: Unread Count Badge

**Steps:**
1. Trigger several notifications for a user (without reading them)
2. Log in as that user
3. Look at the notification bell

**Expected Results:**
- [ ] Badge shows unread count
- [ ] Count updates when new notifications arrive
- [ ] Badge hidden when count is zero
- [ ] Count is accurate

---

### TC-4.3.3: Open Notification Dropdown

**Steps:**
1. Log in as a user with notifications
2. Click on the notification bell

**Expected Results:**
- [ ] Dropdown opens below bell
- [ ] Shows recent notifications (5-10 items)
- [ ] Each notification shows title/summary
- [ ] Each shows relative timestamp ("2 hours ago")
- [ ] Unread items visually distinct
- [ ] "View All" link visible

---

### TC-4.3.4: Notification Dropdown - Empty State

**Steps:**
1. Log in as a new user with no notifications
2. Click on the notification bell

**Expected Results:**
- [ ] Dropdown opens
- [ ] Shows empty state message
- [ ] Message like "No notifications yet"
- [ ] Still shows "View All" link (or hides it)

---

### TC-4.3.5: Click Notification in Dropdown

**Steps:**
1. Log in as a user with unread notifications
2. Click on the notification bell
3. Click on one of the notifications

**Expected Results:**
- [ ] Navigates to related resource (shift, leave, etc.)
- [ ] Notification marked as read
- [ ] Badge count decreases
- [ ] Dropdown closes

---

### TC-4.3.6: View All Notifications Page

**Steps:**
1. Log in as a user with many notifications
2. Click on the notification bell
3. Click "View All" link

**Expected Results:**
- [ ] Full notifications page loads
- [ ] Shows all notifications
- [ ] Pagination works for many items
- [ ] Newest first (or configurable sort)
- [ ] Read/unread status visible

---

### TC-4.3.7: Mark Single Notification as Read

**Steps:**
1. Go to notifications index page
2. Find an unread notification
3. Click "Mark as Read" action (or hover action)

**Expected Results:**
- [ ] Notification status changes to read
- [ ] Visual indication updates immediately
- [ ] Unread count in header decreases
- [ ] No page refresh required (AJAX)

---

### TC-4.3.8: Mark All Notifications as Read

**Steps:**
1. Have multiple unread notifications
2. Go to notifications index page
3. Click "Mark All as Read" button

**Expected Results:**
- [ ] All notifications marked as read
- [ ] Visual update for all items
- [ ] Badge count goes to zero
- [ ] Confirmation message shown

---

### TC-4.3.9: Delete Individual Notification

**Steps:**
1. Go to notifications index page
2. Find a notification
3. Click delete/dismiss action
4. Confirm if prompted

**Expected Results:**
- [ ] Notification removed from list
- [ ] Confirmation message shown
- [ ] If unread, badge count decreases
- [ ] Cannot recover deleted notification

---

### TC-4.3.10: Notification Types Display Correctly

**Steps:**
1. Trigger different notification types:
   - Shift assigned
   - Leave approved
   - Swap request received
2. Check notifications

**Expected Results:**
- [ ] Each type has appropriate icon
- [ ] Title reflects notification type
- [ ] Summary shows relevant details
- [ ] Timestamp accurate
- [ ] Link goes to correct resource

---

### TC-4.3.11: Pagination on Notifications Page

**Steps:**
1. Generate 20+ notifications for a user
2. Go to notifications index page
3. Navigate through pages

**Expected Results:**
- [ ] Shows limited items per page (10-20)
- [ ] Pagination controls work
- [ ] Can navigate to next/previous page
- [ ] Page numbers accurate
- [ ] Total count shown

---

### TC-4.3.12: Real-Time Update - New Notification (Optional)

**Steps:**
1. Log in as an employee
2. Keep page open
3. Admin changes employee's shift (triggering notification)
4. Observe without refreshing

**Expected Results:**
- [ ] Badge count increases automatically
- [ ] Toast/popup may appear for new notification
- [ ] Dropdown shows new item when opened
- [ ] No manual refresh needed

---

### TC-4.3.13: Mobile View of Notifications

**Steps:**
1. Access site on mobile device
2. Log in as a user with notifications
3. Tap notification bell
4. View notification dropdown and full page

**Expected Results:**
- [ ] Bell icon accessible on mobile
- [ ] Dropdown works on touch
- [ ] Dropdown fits mobile screen
- [ ] Full page is mobile-responsive
- [ ] Touch targets adequately sized

---

### TC-4.3.14: Notification Links Navigate Correctly

**Steps:**
1. Have notifications of different types
2. Click on "Shift Changed" notification
3. Click on "Leave Approved" notification
4. Click on "Swap Request" notification

**Expected Results:**
- [ ] Shift notification goes to shift details
- [ ] Leave notification goes to leave request
- [ ] Swap notification goes to swap details
- [ ] All links resolve correctly
- [ ] No broken links

---

## Notes

- Test notification bell on all pages (consistency)
- Verify timestamps use correct timezone
- Test with very long notification text (truncation)
- Check screen reader accessibility
- Test dropdown positioning at screen edges
- Verify mobile touch interactions work smoothly
