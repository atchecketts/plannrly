# UAT: Feature 18.2 - Predictive Absence Analytics

## Test Environment Setup

**Prerequisites:**
- Admin accounts
- Multiple employees with absence history (6+ months)
- Historical leave requests and no-shows
- Public holiday calendar configured

**Test URLs:**
- Absence Patterns: `/analytics/absence-patterns`
- Risk API: `/api/analytics/absence/risk`

---

## Test Cases

### TC-18.2.1: Absence Patterns Dashboard Loads

**Steps:**
1. Log in as admin
2. Navigate to Analytics > Absence Patterns

**Expected Results:**
- [ ] Dashboard loads without errors
- [ ] Pattern visualizations displayed
- [ ] At-risk employee list visible
- [ ] Date range selector available

---

### TC-18.2.2: Monday/Friday Pattern Detection

**Steps:**
1. Have employee with history of Monday/Friday absences
2. View absence patterns

**Expected Results:**
- [ ] Monday/Friday pattern identified
- [ ] Pattern strength shown
- [ ] Employee flagged for pattern
- [ ] Visualization shows day distribution

---

### TC-18.2.3: Pre-Holiday Pattern Detection

**Steps:**
1. Have employee with absences before public holidays
2. View absence patterns

**Expected Results:**
- [ ] Pre-holiday pattern detected
- [ ] Days before holiday analyzed
- [ ] Pattern strength calculated
- [ ] Correlation shown

---

### TC-18.2.4: Post-Holiday Pattern Detection

**Steps:**
1. Have employee with absences after holidays/vacations
2. View absence patterns

**Expected Results:**
- [ ] Post-holiday pattern detected
- [ ] Pattern strength shown
- [ ] Return-from-leave absences counted
- [ ] Correlation visible

---

### TC-18.2.5: Seasonal Pattern Detection

**Steps:**
1. Have employees with seasonal absence patterns (e.g., winter)
2. View seasonal analysis

**Expected Results:**
- [ ] Seasonal trends identified
- [ ] Month-by-month breakdown
- [ ] Peak absence periods shown
- [ ] Year-over-year comparison (if data available)

---

### TC-18.2.6: Absence Trend Per Employee

**Steps:**
1. View individual employee absence profile
2. Check trend indicator

**Expected Results:**
- [ ] Trend direction shown (increasing/stable/decreasing)
- [ ] Historical comparison
- [ ] Recent period vs average
- [ ] Clear visualization

---

### TC-18.2.7: Risk Score Generation

**Steps:**
1. View upcoming period
2. Check risk scores for employees

**Expected Results:**
- [ ] Risk scores calculated (0-100)
- [ ] Higher scores = higher absence risk
- [ ] Based on patterns and history
- [ ] Updates for different dates

---

### TC-18.2.8: Risk Score for Monday

**Steps:**
1. View risk scores for upcoming Monday
2. Check employees with Monday patterns

**Expected Results:**
- [ ] Employees with Monday patterns have higher risk
- [ ] Risk score reflects pattern strength
- [ ] Helps with staffing planning

---

### TC-18.2.9: Risk Score Near Holiday

**Steps:**
1. View risk scores for day before public holiday
2. Check employees with pre-holiday patterns

**Expected Results:**
- [ ] Pre-holiday pattern increases risk score
- [ ] Employees flagged appropriately
- [ ] Helps plan coverage

---

### TC-18.2.10: At-Risk Employee List

**Steps:**
1. View absence patterns dashboard
2. Check at-risk employee section

**Expected Results:**
- [ ] Lists employees with high risk scores
- [ ] Sorted by risk level
- [ ] Shows risk factors
- [ ] Actionable information

---

### TC-18.2.11: Manager Alert for At-Risk Employees

**Steps:**
1. Configure alert threshold
2. Have employee exceed threshold
3. Check for alert

**Expected Results:**
- [ ] Alert generated for high-risk employee
- [ ] Sent to manager/admin
- [ ] Contains relevant details
- [ ] Suggests proactive action

---

### TC-18.2.12: Pattern Visualization Charts

**Steps:**
1. View absence patterns dashboard
2. Interact with charts

**Expected Results:**
- [ ] Day-of-week distribution chart
- [ ] Monthly trend chart
- [ ] Pattern strength visualizations
- [ ] Charts are interactive/hoverable

---

### TC-18.2.13: Individual Employee Absence Profile

**Steps:**
1. Click on specific employee
2. View their absence profile

**Expected Results:**
- [ ] Individual absence history shown
- [ ] Patterns specific to employee
- [ ] Risk factors listed
- [ ] Historical comparison

---

### TC-18.2.14: Compare to Team Average

**Steps:**
1. View employee absence profile
2. Check comparison to team

**Expected Results:**
- [ ] Team average shown
- [ ] Employee deviation from average
- [ ] Helps contextualize patterns
- [ ] Above/below average indicated

---

### TC-18.2.15: Employee Cannot Access Absence Analytics

**Steps:**
1. Log in as regular employee
2. Try to access absence analytics

**Expected Results:**
- [ ] Access denied
- [ ] Admin-only feature
- [ ] Privacy maintained

---

### TC-18.2.16: Historical Same-Period Analysis

**Steps:**
1. View risk for specific upcoming date
2. Check historical data for same period last year

**Expected Results:**
- [ ] Last year's data referenced
- [ ] Same week/month compared
- [ ] Helps identify annual patterns
- [ ] Seasonal context provided

---

### TC-18.2.17: No Pattern Detected (Normal Employee)

**Steps:**
1. View employee with random/normal absence distribution
2. Check pattern analysis

**Expected Results:**
- [ ] No significant patterns flagged
- [ ] Low pattern strength scores
- [ ] Normal risk assessment
- [ ] No false positives

---

## Notes

- Requires sufficient historical data (6+ months recommended)
- Test privacy considerations (employees shouldn't see each other's patterns)
- Verify statistical calculations are valid
- Consider false positive rate
- Patterns should be used sensitively (not punitively)
- Test with edge cases (new employees, long-term employees)
- Validate that predictions correlate with actual absences over time
