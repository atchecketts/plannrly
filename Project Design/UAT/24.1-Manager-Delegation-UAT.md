# UAT: Feature 24.1 - Manager Delegation System

## Test Environment Setup

**Prerequisites:**
- Admin user with delegation configuration access
- Multiple manager accounts
- Employees assigned to different managers
- Tenant settings for delegation approval workflow

**Test URL:** `/delegations`, `/settings/delegations`

---

## Test Cases

### TC-24.1.1: View Delegations Index

**Steps:**
1. Log in as a manager
2. Navigate to Delegations

**Expected Results:**
- [ ] Delegations page loads successfully
- [ ] Shows delegations you have granted
- [ ] Shows delegations granted to you
- [ ] Create delegation button visible

---

### TC-24.1.2: Create Delegation - Basic

**Steps:**
1. Log in as a manager (Manager A)
2. Navigate to Delegations
3. Click "Create Delegation"
4. Select delegate (Manager B)
5. Select scope (e.g., leave approvals for Team X)
6. Set date range
7. Save

**Expected Results:**
- [ ] Delegation form loads correctly
- [ ] Can select another manager as delegate
- [ ] Scope options are clear
- [ ] Date range picker works
- [ ] Delegation created successfully

---

### TC-24.1.3: Delegation Scope Selection

**Steps:**
1. Create a delegation
2. Review scope options:
   - Leave approvals
   - Shift approvals
   - Schedule editing
   - Time clock overrides

**Expected Results:**
- [ ] Multiple scope options available
- [ ] Can select one or multiple scopes
- [ ] Scope descriptions clear
- [ ] Granular control possible

---

### TC-24.1.4: Delegation Date Range

**Steps:**
1. Create a delegation for a specific date range
2. Before start date: test delegate permissions
3. During date range: test delegate permissions
4. After end date: test delegate permissions

**Expected Results:**
- [ ] Before start: delegate has no extra permissions
- [ ] During: delegate has delegated permissions
- [ ] After end: permissions automatically revoked
- [ ] Date boundaries respected

---

### TC-24.1.5: Delegate Exercises Delegated Permission

**Steps:**
1. Manager A delegates leave approval to Manager B
2. Log in as Manager B
3. Approve a leave request for Manager A's team

**Expected Results:**
- [ ] Manager B can see pending leave requests
- [ ] Can approve/reject as delegated
- [ ] Action is recorded
- [ ] Manager A's authority maintained

---

### TC-24.1.6: Delegation Audit Logging

**Steps:**
1. Delegate takes an action using delegated authority
2. Check audit log/activity log

**Expected Results:**
- [ ] Action logged with delegate's name
- [ ] Original manager noted
- [ ] Delegation reference included
- [ ] Timestamp recorded

---

### TC-24.1.7: Revoke Delegation Early

**Steps:**
1. Create an active delegation
2. Navigate to Delegations
3. Revoke the delegation before end date

**Expected Results:**
- [ ] Revoke option available
- [ ] Confirmation required
- [ ] Delegation immediately revoked
- [ ] Delegate loses permissions instantly

---

### TC-24.1.8: Edit Existing Delegation

**Steps:**
1. View an active delegation
2. Click Edit
3. Modify scope or end date
4. Save

**Expected Results:**
- [ ] Can edit delegation details
- [ ] Changes take effect immediately
- [ ] Audit log updated
- [ ] Delegate notified (if configured)

---

### TC-24.1.9: Delegation Approval Workflow (If Enabled)

**Steps:**
1. Tenant settings require delegation approval
2. Create a delegation
3. Log in as admin to approve

**Expected Results:**
- [ ] Delegation created in "pending" status
- [ ] Admin notification sent
- [ ] Admin can approve/reject
- [ ] Delegation active only after approval

---

### TC-24.1.10: View Delegations Granted to Me

**Steps:**
1. Receive a delegation from another manager
2. Log in and navigate to Delegations
3. View "Delegated to Me" section

**Expected Results:**
- [ ] Shows delegations received
- [ ] Details who delegated
- [ ] Shows scope and date range
- [ ] Clear what you can do

---

### TC-24.1.11: Cannot Delegate Beyond Own Authority

**Steps:**
1. Manager with limited scope tries to delegate
2. Attempt to delegate permissions they don't have

**Expected Results:**
- [ ] Cannot delegate non-existent permissions
- [ ] Error message explains limitation
- [ ] Only own permissions can be delegated
- [ ] No privilege escalation

---

### TC-24.1.12: Delegation Settings in Tenant Config

**Steps:**
1. Log in as admin
2. Navigate to Settings > Delegation Settings
3. Configure delegation options

**Expected Results:**
- [ ] Can enable/disable delegation feature
- [ ] Can require approval workflow
- [ ] Can set maximum delegation period
- [ ] Settings save successfully

---

### TC-24.1.13: Notification on Delegation Created

**Steps:**
1. Create a delegation
2. Check delegate's notifications

**Expected Results:**
- [ ] Delegate receives notification
- [ ] Details scope and duration
- [ ] Link to view delegation
- [ ] Clear call to action

---

### TC-24.1.14: Delegation Expiry Reminder

**Steps:**
1. Delegation approaching end date
2. Check for expiry reminders

**Expected Results:**
- [ ] Original manager notified before expiry
- [ ] Delegate notified before expiry
- [ ] Option to extend if needed
- [ ] Clear expiry date shown

---

### TC-24.1.15: Multiple Active Delegations

**Steps:**
1. Create multiple delegations to different people
2. Verify all are active simultaneously

**Expected Results:**
- [ ] Multiple delegations supported
- [ ] Each delegate has correct permissions
- [ ] No interference between delegations
- [ ] All tracked properly

---

## Notes

- Record any bugs or issues found during testing
- Test edge cases with overlapping delegations
- Verify audit trail completeness
- Check that delegated actions are attributed correctly
