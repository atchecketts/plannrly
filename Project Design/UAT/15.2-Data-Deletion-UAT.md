# UAT: Feature 15.2 - Data Deletion (Right to Erasure)

## Test Environment Setup

**Prerequisites:**
- Employee user account with personal data
- Admin user account for approval workflow
- Tenant with configured data retention policies
- Email service configured

**Test URLs:**
- Employee: `/settings/data-deletion`
- Admin: `/admin/deletion-requests`

---

## Test Cases

### TC-15.2.1: Access Data Deletion Request Page (Employee)

**Steps:**
1. Log in as an employee
2. Navigate to account settings
3. Click on "Delete My Data" or "Data Deletion"

**Expected Results:**
- [ ] Data deletion page loads successfully
- [ ] Explanation of data deletion is shown
- [ ] Consequences of deletion explained
- [ ] Request deletion button is visible

---

### TC-15.2.2: Submit Data Deletion Request

**Steps:**
1. Log in as an employee
2. Navigate to data deletion page
3. Read the information provided
4. Click "Request Data Deletion"
5. Confirm the request (may require password)

**Expected Results:**
- [ ] Confirmation step required
- [ ] Request is submitted successfully
- [ ] User informed of approval process
- [ ] Request is logged in audit trail

---

### TC-15.2.3: Deletion Request Confirmation

**Steps:**
1. Submit a data deletion request
2. Verify confirmation screen/message

**Expected Results:**
- [ ] Clear confirmation message displayed
- [ ] Status of request shown (pending approval)
- [ ] Information about next steps provided
- [ ] Contact information for questions

---

### TC-15.2.4: Admin View Deletion Requests

**Steps:**
1. Log in as admin
2. Navigate to deletion requests management
3. View list of pending requests

**Expected Results:**
- [ ] Deletion requests list is accessible
- [ ] Shows requesting user details
- [ ] Shows request date
- [ ] Shows request status
- [ ] Approve/Reject actions available

---

### TC-15.2.5: Admin Approve Deletion Request

**Steps:**
1. Log in as admin
2. Navigate to deletion requests
3. Find a pending deletion request
4. Click "Approve"
5. Confirm the approval

**Expected Results:**
- [ ] Approval requires confirmation
- [ ] Request status changes to "Approved"
- [ ] Deletion process is initiated
- [ ] Admin action logged in audit trail

---

### TC-15.2.6: Admin Reject Deletion Request

**Steps:**
1. Log in as admin
2. Navigate to deletion requests
3. Find a pending deletion request
4. Click "Reject"
5. Provide a reason for rejection

**Expected Results:**
- [ ] Rejection requires reason
- [ ] Request status changes to "Rejected"
- [ ] User is notified of rejection
- [ ] Rejection logged in audit trail

---

### TC-15.2.7: User Anonymization Process

**Steps:**
1. Approve a deletion request
2. Wait for processing to complete
3. Check user record in database

**Expected Results:**
- [ ] Personal data is anonymized/deleted
- [ ] Historical records preserved but anonymized
- [ ] Shift history shows "Deleted User" or similar
- [ ] Statistics remain accurate

---

### TC-15.2.8: Personal Documents Deleted

**Steps:**
1. Approve a deletion request for user with uploaded documents
2. Verify document storage

**Expected Results:**
- [ ] Personal documents are deleted
- [ ] Profile photos removed
- [ ] Document references cleared
- [ ] Storage space freed

---

### TC-15.2.9: Legal Retention Requirements

**Steps:**
1. Attempt to delete data for user with recent payroll records
2. Observe how legal retention is handled

**Expected Results:**
- [ ] System warns about legal retention periods
- [ ] Required data is retained for compliance
- [ ] Explanation provided for retained data
- [ ] Deletion scheduled after retention period

---

### TC-15.2.10: Confirmation Email Sent to User

**Steps:**
1. Complete a data deletion request approval
2. Check user's email inbox

**Expected Results:**
- [ ] Confirmation email is sent
- [ ] Email explains what was deleted
- [ ] Email states any retained data (and why)
- [ ] Timestamp of deletion included

---

### TC-15.2.11: Admin Confirmation Email

**Steps:**
1. Complete a data deletion approval
2. Check admin's email inbox

**Expected Results:**
- [ ] Admin receives confirmation
- [ ] Summary of deleted data provided
- [ ] Reference number for records

---

### TC-15.2.12: Deletion Actions Logged

**Steps:**
1. Complete a data deletion
2. Check audit logs

**Expected Results:**
- [ ] Deletion request logged
- [ ] Approval/rejection logged
- [ ] Actual deletion logged
- [ ] Logs maintained for compliance

---

### TC-15.2.13: Cannot Re-request While Pending

**Steps:**
1. Submit a deletion request
2. Try to submit another deletion request

**Expected Results:**
- [ ] Second request is blocked
- [ ] Message shows existing pending request
- [ ] Clear status of current request shown

---

### TC-15.2.14: Cancel Deletion Request

**Steps:**
1. Submit a deletion request
2. Before approval, try to cancel the request

**Expected Results:**
- [ ] Cancel option available for user
- [ ] Request is cancelled successfully
- [ ] Status updated to "Cancelled"
- [ ] User can submit new request later

---

### TC-15.2.15: Tenant Isolation in Deletion

**Steps:**
1. Process deletion for user in Tenant A
2. Verify Tenant B data is unaffected

**Expected Results:**
- [ ] Only target user's data affected
- [ ] Tenant boundaries respected
- [ ] No cross-tenant data issues
- [ ] Multi-tenant security maintained

---

## Notes

- Record any bugs or issues found during testing
- Note the browser and device used for testing
- Screenshot any unexpected behavior
- Verify deletion complies with GDPR Article 17 requirements
- Document any data that cannot be deleted and why
