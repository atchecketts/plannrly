# UAT: Feature 16.8 - Conflict Detection & Warnings

## Test Environment Setup

**Prerequisites:**
- Admin user account
- Employees with availability set
- Employees with approved leave
- Existing schedules
- Working time rules configured

**Test URL:** Schedule creation/editing views

---

## Test Cases

### TC-16.8.1: Detect Leave Conflict

**Steps:**
1. Approve leave for employee on Monday
2. Try to schedule the employee on Monday

**Expected Results:**
- [ ] Warning displayed about leave conflict
- [ ] Shows which leave period conflicts
- [ ] Cannot assign without acknowledgment
- [ ] Clear visibility of conflict

---

### TC-16.8.2: Detect Availability Conflict

**Steps:**
1. Employee marks Tuesday as unavailable
2. Try to schedule the employee on Tuesday

**Expected Results:**
- [ ] Warning displayed about availability conflict
- [ ] Shows employee's availability status
- [ ] Requires acknowledgment to override
- [ ] Conflict clearly highlighted

---

### TC-16.8.3: Detect Rest Period Violation

**Steps:**
1. Schedule employee for shift ending at 11 PM
2. Try to schedule same employee for 6 AM next day
3. Observe warning (less than 11 hours rest)

**Expected Results:**
- [ ] Rest period warning displayed
- [ ] Shows required rest time
- [ ] Shows actual rest time
- [ ] Warning is prominent

---

### TC-16.8.4: Detect Overtime Warning

**Steps:**
1. Employee has 38 hours scheduled this week
2. Try to schedule 10-hour shift
3. Observe overtime warning

**Expected Results:**
- [ ] Overtime warning displayed
- [ ] Shows current weekly hours
- [ ] Shows hours if shift added
- [ ] Indicates overtime threshold

---

### TC-16.8.5: Detect Qualification Gap

**Steps:**
1. Create shift requiring specific role
2. Try to assign employee without that role

**Expected Results:**
- [ ] Qualification warning displayed
- [ ] Shows required qualification
- [ ] Shows employee's qualifications
- [ ] Prevents unqualified assignment OR warns

---

### TC-16.8.6: Multiple Conflicts Detection

**Steps:**
1. Create scenario with multiple conflicts
2. Try to schedule the shift

**Expected Results:**
- [ ] All conflicts shown
- [ ] Listed clearly
- [ ] Each conflict explained
- [ ] Must acknowledge all to proceed

---

### TC-16.8.7: Warnings in Schedule View

**Steps:**
1. Create a schedule with conflicts
2. View the schedule calendar

**Expected Results:**
- [ ] Conflict indicators visible on shifts
- [ ] Warning icons or colors
- [ ] Can click for details
- [ ] Easy to identify problem shifts

---

### TC-16.8.8: Acknowledge Warning and Proceed

**Steps:**
1. Trigger a conflict warning
2. Click "Acknowledge" or "Proceed Anyway"
3. Complete the assignment

**Expected Results:**
- [ ] Acknowledgment option available
- [ ] Can override the warning
- [ ] Assignment is made
- [ ] Override is logged

---

### TC-16.8.9: Log Overridden Warnings

**Steps:**
1. Override several conflict warnings
2. Check audit logs or conflict history

**Expected Results:**
- [ ] Overrides are logged
- [ ] Shows who overrode
- [ ] Shows what conflict was overridden
- [ ] Timestamp recorded

---

### TC-16.8.10: "Fix All" Suggestions

**Steps:**
1. View schedule with multiple conflicts
2. Click "Fix All" or "Resolve Conflicts"

**Expected Results:**
- [ ] System suggests fixes
- [ ] Alternative assignments proposed
- [ ] Can apply fixes individually
- [ ] Clear improvement shown

---

### TC-16.8.11: Conflict Prevention on Drag-and-Drop

**Steps:**
1. Use drag-and-drop scheduling
2. Drag shift to create a conflict

**Expected Results:**
- [ ] Warning shown before drop completes
- [ ] Can cancel the drop
- [ ] Must acknowledge to proceed
- [ ] Real-time feedback

---

### TC-16.8.12: Conflict Check on Bulk Assignment

**Steps:**
1. Use bulk assignment feature
2. Include assignments that would create conflicts

**Expected Results:**
- [ ] Conflicts detected before applying
- [ ] Summary of all conflicts shown
- [ ] Can exclude conflicting assignments
- [ ] Bulk action handles warnings

---

### TC-16.8.13: No Warning for Valid Assignment

**Steps:**
1. Schedule employee with no conflicts
2. Complete assignment

**Expected Results:**
- [ ] No warnings displayed
- [ ] Assignment completes smoothly
- [ ] System correctly identifies no issues

---

### TC-16.8.14: Configurable Warning Thresholds

**Steps:**
1. Access conflict detection settings
2. Modify thresholds (e.g., rest period hours)
3. Save and test

**Expected Results:**
- [ ] Settings are configurable per tenant
- [ ] Changes take effect
- [ ] Warnings reflect new thresholds
- [ ] Sensible defaults provided

---

### TC-16.8.15: Conflict Report

**Steps:**
1. Generate a conflict report for the schedule
2. Review all detected conflicts

**Expected Results:**
- [ ] Report available
- [ ] Lists all conflicts
- [ ] Can filter by type
- [ ] Can export report

---

## Notes

- Record any bugs or issues found during testing
- Note the browser and device used for testing
- Screenshot any unexpected behavior
- Verify conflicts are detected accurately without false positives
