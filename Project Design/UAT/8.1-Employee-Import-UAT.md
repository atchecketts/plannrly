# UAT: Feature 8.1 - Employee Import

## Test Environment Setup

**Prerequisites:**
- Admin user with user management permissions
- Business roles already configured
- Departments and locations already configured
- Email service configured for welcome emails
- Sample CSV files (valid and invalid) for testing

**Test URL:** `/users/import`

---

## Test Cases

### TC-8.1.1: Access Import Page (Admin)

**Steps:**
1. Log in as an admin
2. Navigate to Users list
3. Click "Import" button or navigate to `/users/import`

**Expected Results:**
- [ ] Import page loads successfully
- [ ] Shows file upload form
- [ ] Instructions are visible
- [ ] Template download link is available

---

### TC-8.1.2: Access Import Page (Employee - Denied)

**Steps:**
1. Log in as an employee without admin privileges
2. Attempt to navigate to `/users/import`

**Expected Results:**
- [ ] Access is denied
- [ ] Appropriate error message or redirect
- [ ] Cannot access import functionality

---

### TC-8.1.3: Download CSV Template

**Steps:**
1. Log in as an admin
2. Navigate to import page
3. Click "Download Template" button

**Expected Results:**
- [ ] CSV template file downloads
- [ ] Contains correct column headers
- [ ] Includes sample row (optional)
- [ ] Instructions or comments included
- [ ] File opens in spreadsheet software

---

### TC-8.1.4: Valid CSV Import - Basic Fields

**Steps:**
1. Log in as an admin
2. Create CSV with: name, email, phone (valid data)
3. Upload the CSV file
4. Click "Import"

**Expected Results:**
- [ ] File is accepted
- [ ] Import process starts
- [ ] Progress indicator shown
- [ ] Employees are created successfully
- [ ] Success message with count

---

### TC-8.1.5: Valid CSV Import - All Fields

**Steps:**
1. Log in as an admin
2. Create CSV with all supported fields:
   - Name, Email, Phone
   - Business Role, Department, Location
   - Start Date, Target Hours
3. Upload and import

**Expected Results:**
- [ ] All fields are imported correctly
- [ ] Business role is assigned
- [ ] Department is assigned
- [ ] Location is assigned
- [ ] Start date is set correctly

---

### TC-8.1.6: Invalid CSV - Wrong Format

**Steps:**
1. Log in as an admin
2. Upload a non-CSV file (e.g., .xlsx, .txt)
3. Attempt to import

**Expected Results:**
- [ ] File format error is shown
- [ ] Import does not proceed
- [ ] Message specifies accepted formats
- [ ] No partial data created

---

### TC-8.1.7: Invalid CSV - Missing Required Columns

**Steps:**
1. Log in as an admin
2. Create CSV missing "email" column
3. Upload and attempt import

**Expected Results:**
- [ ] Validation error shown
- [ ] Lists missing required columns
- [ ] Import does not proceed
- [ ] Helpful message about required fields

---

### TC-8.1.8: Invalid Data - Duplicate Emails

**Steps:**
1. Log in as an admin
2. Create CSV with email that already exists in system
3. Upload and import

**Expected Results:**
- [ ] Duplicate is flagged as error
- [ ] Shows which row has the duplicate
- [ ] Does not create duplicate user
- [ ] Other valid rows may still import

---

### TC-8.1.9: Invalid Data - Malformed Email

**Steps:**
1. Log in as an admin
2. Create CSV with invalid email format (e.g., "not-an-email")
3. Upload and import

**Expected Results:**
- [ ] Validation error for malformed email
- [ ] Shows row number with error
- [ ] Import fails for invalid rows
- [ ] Valid rows may still import

---

### TC-8.1.10: Invalid Data - Non-existent Business Role

**Steps:**
1. Log in as an admin
2. Create CSV with business role name that does not exist
3. Upload and import

**Expected Results:**
- [ ] Error shows invalid business role
- [ ] Specifies which row has the issue
- [ ] Suggests available roles
- [ ] User not created with invalid role

---

### TC-8.1.11: Validation Error Summary

**Steps:**
1. Log in as an admin
2. Upload CSV with multiple errors
3. View the validation results

**Expected Results:**
- [ ] Summary shows total rows
- [ ] Shows count of successful vs failed
- [ ] Lists each error with row number
- [ ] Clear and actionable error messages

---

### TC-8.1.12: Import Progress for Large File

**Steps:**
1. Log in as an admin
2. Create CSV with 100+ employees
3. Upload and import

**Expected Results:**
- [ ] Progress indicator shows during import
- [ ] Shows percentage or count complete
- [ ] Page remains responsive
- [ ] Completion notification when done

---

### TC-8.1.13: Queued Import Processing

**Steps:**
1. Log in as an admin
2. Upload a large CSV file
3. Check that import is queued

**Expected Results:**
- [ ] Message indicates import is being processed
- [ ] Can navigate away from page
- [ ] Notification when import completes
- [ ] Import continues in background

---

### TC-8.1.14: Welcome Email Sending

**Steps:**
1. Log in as an admin
2. Import employees via CSV
3. Check "Send welcome emails" option
4. Verify email delivery

**Expected Results:**
- [ ] Option to send welcome emails is available
- [ ] Emails are sent to imported employees
- [ ] Emails contain password setup link
- [ ] Can opt out of sending emails

---

### TC-8.1.15: Import Without Welcome Email

**Steps:**
1. Log in as an admin
2. Import employees via CSV
3. Uncheck "Send welcome emails" option
4. Complete import

**Expected Results:**
- [ ] Employees are created
- [ ] No welcome emails are sent
- [ ] Employees have no password set
- [ ] Admin can manually invite later

---

## Notes

- Record any bugs or issues found during testing
- Note the browser and device used for testing
- Screenshot any unexpected behavior
- Test with various CSV encodings (UTF-8, etc.)
- Verify special characters in names are handled
- Test with very large files for performance
