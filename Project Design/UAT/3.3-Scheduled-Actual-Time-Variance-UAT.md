# UAT: 3.3 Scheduled vs Actual Time Variance

**Feature:** Scheduled vs Actual Time Variance
**Status:** Ready for Testing
**Implemented:** 2026-01-29

## Prerequisites

1. User has admin access to view time entries
2. Clock In/Out feature is enabled
3. At least one completed time entry exists (clocked in and out)

## Test Cases

### TC-3.3.1: Variance Display on Time Entry Detail

**Steps:**
1. Log in as Admin
2. Navigate to Time Clock
3. Click "View" on a completed time entry (status: Clocked Out)

**Expected Result:**
- "Time Variance" card is displayed
- Shows Clock In status badge (green/yellow/red/blue)
- Shows Clock Out status badge (green/yellow/red/orange)
- Shows Total Variance badge
- Shows summary line: "Scheduled: Xm | Actual: Xm | Diff: +/-Xm"

---

### TC-3.3.2: Variance Column in Time Entries List

**Steps:**
1. Navigate to Time Clock
2. View the time entries table

**Expected Result:**
- "Variance" column is visible
- Each completed entry shows clock-in status badge
- Total variance shown in parentheses (e.g., "+30m" or "-15m")

---

### TC-3.3.3: On Time Arrival (Green Badge)

**Preconditions:** Employee clocked in exactly on time or within grace period

**Steps:**
1. View time entry detail

**Expected Result:**
- Clock In badge shows "On time" with green color
- is_late = false

---

### TC-3.3.4: Late Arrival (Yellow/Red Badge)

**Preconditions:** Employee clocked in 10 minutes late

**Steps:**
1. View time entry where employee clocked in late

**Expected Result:**
- If within grace (default 15 min): shows "On time" (green)
- If > grace period: shows "Xm late" (yellow for 1-15m, red for >15m)
- is_late = true if beyond grace period

---

### TC-3.3.5: Early Arrival (Blue Badge)

**Preconditions:** Employee clocked in 15+ minutes early

**Steps:**
1. View time entry where employee clocked in early

**Expected Result:**
- Clock In badge shows "Xm early" with blue color
- is_late = false

---

### TC-3.3.6: On Time Departure (Green Badge)

**Preconditions:** Employee clocked out at scheduled end time (within 5 min)

**Steps:**
1. View time entry detail

**Expected Result:**
- Clock Out badge shows "On time" with green color
- is_early_departure = false

---

### TC-3.3.7: Early Departure (Yellow/Red Badge)

**Preconditions:** Employee clocked out 30 minutes early

**Steps:**
1. View time entry where employee left early

**Expected Result:**
- Clock Out badge shows "Xm early" with red color (>15m early)
- is_early_departure = true

---

### TC-3.3.8: Overtime (Orange Badge)

**Preconditions:** Employee clocked out 1 hour after scheduled end

**Steps:**
1. View time entry with overtime

**Expected Result:**
- Clock Out badge shows "Xm overtime" with orange color
- is_overtime = true (if total worked exceeds scheduled by 15+ min)

---

### TC-3.3.9: Total Variance Display

**Steps:**
1. View time entry with clocked out status
2. Observe Total Variance badge

**Expected Result:**
- Green if within 5 min of scheduled
- Yellow if 5-30 min over or under
- Red if 30+ min under
- Orange if 30+ min over
- Shows formatted variance like "+1h 30m" or "-45m"

---

### TC-3.3.10: Scheduled vs Actual Summary Line

**Steps:**
1. View time entry detail
2. Look at bottom of Time Variance card

**Expected Result:**
- Shows "Scheduled: 450m" (or similar based on shift)
- Shows "Actual: Xm" (calculated work time minus breaks)
- Shows "Diff: +/-Xm" (formatted variance)

---

### TC-3.3.11: Grace Period Configuration

**Preconditions:** Custom grace period set in tenant settings

**Steps:**
1. Log in as Admin
2. Go to Settings
3. Set "Clock In Grace Period" to 5 minutes
4. Save
5. View a time entry where employee clocked in 10 min late

**Expected Result:**
- Employee is marked as "late" (red badge)
- Default grace (15 min) would have shown "on time"

---

### TC-3.3.12: No Shift Association

**Steps:**
1. View a time entry without an associated shift (if possible)

**Expected Result:**
- Variance section not displayed (or shows N/A)
- No errors occur

---

### TC-3.3.13: In Progress Entry (No Clock Out)

**Steps:**
1. View a time entry that is still clocked in (no clock out)

**Expected Result:**
- Clock In status badge is shown
- Clock Out and Total Variance not shown (or show N/A)
- No errors occur

---

## Verification Checklist

| Test Case | Pass | Fail | Notes |
|-----------|------|------|-------|
| TC-3.3.1 Variance Detail View | | | |
| TC-3.3.2 Variance Column | | | |
| TC-3.3.3 On Time Arrival | | | |
| TC-3.3.4 Late Arrival | | | |
| TC-3.3.5 Early Arrival | | | |
| TC-3.3.6 On Time Departure | | | |
| TC-3.3.7 Early Departure | | | |
| TC-3.3.8 Overtime | | | |
| TC-3.3.9 Total Variance | | | |
| TC-3.3.10 Summary Line | | | |
| TC-3.3.11 Grace Period | | | |
| TC-3.3.12 No Shift | | | |
| TC-3.3.13 In Progress | | | |

## Sign-off

**Tested By:** _______________________
**Date:** _______________________
**Result:** [ ] Pass  [ ] Fail  [ ] Partial
**Notes:**
