# UAT: Feature 22.1 - Data Retention System

## Test Environment Setup

**Prerequisites:**
- Admin user with data retention permissions
- Historical data older than typical retention periods
- Test data for archival scenarios
- Knowledge of GDPR data export requirements

**Test URL:** `/settings/data-retention`

---

## Test Cases

### TC-22.1.1: View Data Retention Settings

**Steps:**
1. Log in as an admin
2. Navigate to Settings > Data Retention

**Expected Results:**
- [ ] Data retention settings page loads
- [ ] Current retention policies displayed
- [ ] Data types with retention periods shown
- [ ] Archival status visible

---

### TC-22.1.2: Configure Retention Policy for Shifts

**Steps:**
1. Navigate to Data Retention settings
2. Find shift data retention policy
3. Set retention period (e.g., 2 years)
4. Save changes

**Expected Results:**
- [ ] Retention period saved successfully
- [ ] Policy shows updated period
- [ ] Confirmation message displayed
- [ ] Change logged for audit

---

### TC-22.1.3: Configure Retention Policy for Clock Records

**Steps:**
1. Navigate to Data Retention settings
2. Find time/attendance data policy
3. Set retention period
4. Save changes

**Expected Results:**
- [ ] Retention period configurable
- [ ] Legal minimum enforced (if applicable)
- [ ] Policy saved successfully
- [ ] Warning if below recommended period

---

### TC-22.1.4: Configure Retention Policy for Leave Records

**Steps:**
1. Navigate to Data Retention settings
2. Find leave request data policy
3. Set retention period
4. Save changes

**Expected Results:**
- [ ] Policy configurable
- [ ] Leave history retention set
- [ ] Approved/rejected records covered
- [ ] Policy saved successfully

---

### TC-22.1.5: View Archived Records

**Steps:**
1. Navigate to Data Retention settings
2. Click on "View Archived Records" or similar

**Expected Results:**
- [ ] Archived records listing shown
- [ ] Shows data type, archive date, record count
- [ ] Can filter by type or date
- [ ] Read-only access to archived data

---

### TC-22.1.6: Manual Data Archive

**Steps:**
1. Navigate to Data Retention settings
2. Select data older than X period
3. Click "Archive Now"
4. Confirm the action

**Expected Results:**
- [ ] Confirmation dialog shown
- [ ] Archive process starts
- [ ] Progress indicator displayed
- [ ] Records moved to archive storage

---

### TC-22.1.7: Scheduled Retention Processing

**Steps:**
1. Configure retention policies
2. Wait for scheduled daily/weekly processing
3. Check retention processing logs

**Expected Results:**
- [ ] Scheduled job runs automatically
- [ ] Old data archived per policies
- [ ] Processing logged
- [ ] No data loss beyond policy

---

### TC-22.1.8: Data Deletion After Retention

**Steps:**
1. Set a short retention + archive period for test data
2. Let data age past the total retention period
3. Verify data is permanently deleted

**Expected Results:**
- [ ] Data deleted after full retention period
- [ ] Cannot recover deleted data
- [ ] Deletion logged for compliance
- [ ] Warning before permanent deletion

---

### TC-22.1.9: GDPR Data Export - Single Employee

**Steps:**
1. Navigate to GDPR tools
2. Select an employee for data export
3. Generate their data export

**Expected Results:**
- [ ] All employee's personal data collected
- [ ] Includes shifts, clock records, leave, etc.
- [ ] Downloadable format (JSON/CSV)
- [ ] Export logged for compliance

---

### TC-22.1.10: GDPR Data Export - Full Report

**Steps:**
1. Navigate to GDPR tools
2. Request full data export for compliance

**Expected Results:**
- [ ] Comprehensive data export generated
- [ ] Includes all personal data categories
- [ ] Machine-readable format
- [ ] Ready for data subject request response

---

### TC-22.1.11: Right to Be Forgotten Request

**Steps:**
1. Employee requests account deletion
2. Admin processes the request
3. Verify data anonymization/deletion

**Expected Results:**
- [ ] Personal data removed or anonymized
- [ ] Historical records preserved for business (anonymized)
- [ ] Compliance with GDPR erasure
- [ ] Audit trail of request and action

---

### TC-22.1.12: Retention Policy by Data Type

**Steps:**
1. Configure different retention periods for:
   - Shifts: 3 years
   - Clock records: 5 years
   - Leave requests: 2 years
2. Verify each policy is applied separately

**Expected Results:**
- [ ] Each data type has independent policy
- [ ] Archival happens per policy
- [ ] No cross-contamination of policies
- [ ] Dashboard shows all policies

---

### TC-22.1.13: Legal Hold Override

**Steps:**
1. Place a legal hold on certain records
2. Let retention period pass
3. Verify records are NOT deleted

**Expected Results:**
- [ ] Legal hold prevents deletion
- [ ] Records preserved despite policy
- [ ] Clear indicator of hold status
- [ ] Admin can release hold when appropriate

---

### TC-22.1.14: Archive Storage Access

**Steps:**
1. Access archived data for reporting
2. Search within archived records

**Expected Results:**
- [ ] Archived data queryable
- [ ] May have slower access
- [ ] Read-only access
- [ ] Can restore if needed (admin)

---

### TC-22.1.15: Retention Policy Compliance Report

**Steps:**
1. Generate a data retention compliance report
2. Review the report

**Expected Results:**
- [ ] Report shows all policies
- [ ] Shows data volumes per category
- [ ] Upcoming archival/deletion scheduled
- [ ] Compliance status summary

---

## Notes

- Record any bugs or issues found during testing
- Test with realistic data volumes
- Verify GDPR compliance with legal review
- Document any regional legal requirements
