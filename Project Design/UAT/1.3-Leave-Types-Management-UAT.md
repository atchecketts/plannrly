# UAT: Feature 1.3 - Leave Types Management

## Test Environment Setup

**Prerequisites:**
- One admin user
- One employee user
- Optional: Existing leave types with and without leave requests

**Test URL:** `/leave-types`

---

## Test Cases

### TC-1.3.1: View Leave Types Index (Admin)

**Steps:**
1. Log in as an admin
2. Navigate to "Leave Types" in the sidebar

**Expected Results:**
- [ ] Page loads successfully
- [ ] Shows list of existing leave types
- [ ] Each type shows name with color indicator
- [ ] Shows property badges (Approval Required, Uses Allowance, Paid/Unpaid)
- [ ] Shows request count for each type
- [ ] Shows Active/Inactive status
- [ ] "Add leave type" button is visible

---

### TC-1.3.2: Employee Cannot Access Leave Types

**Steps:**
1. Log in as an employee
2. Try to navigate to `/leave-types` directly

**Expected Results:**
- [ ] Access is denied (403 error)
- [ ] "Leave Types" link is not visible in sidebar

---

### TC-1.3.3: Create Leave Type

**Steps:**
1. Log in as an admin
2. Navigate to Leave Types
3. Click "Add leave type"
4. Fill in the form:
   - Name: "Test Leave"
   - Color: Select a color
   - Check "Requires Approval"
   - Check "Affects Allowance"
   - Check "Paid Leave"
   - Check "Active"
5. Click "Create Leave Type"

**Expected Results:**
- [ ] Form submits successfully
- [ ] Redirected to index with success message
- [ ] New leave type appears in the list
- [ ] All properties are saved correctly
- [ ] Color is displayed correctly

---

### TC-1.3.4: Validation - Name Required

**Steps:**
1. Log in as an admin
2. Go to create leave type form
3. Leave name empty
4. Fill in other fields
5. Click "Create Leave Type"

**Expected Results:**
- [ ] Form does not submit
- [ ] Error message shown for name field
- [ ] Other entered data is preserved

---

### TC-1.3.5: Validation - Valid Color Required

**Steps:**
1. Log in as an admin
2. Go to create leave type form
3. Enter name
4. Try to submit with invalid color (if possible via dev tools)

**Expected Results:**
- [ ] Validation error for color
- [ ] Only valid hex colors accepted

---

### TC-1.3.6: Edit Leave Type

**Steps:**
1. Log in as an admin
2. Navigate to Leave Types
3. Click "Edit" on an existing leave type
4. Change the name
5. Toggle some checkboxes
6. Click "Save Changes"

**Expected Results:**
- [ ] Edit form shows current values
- [ ] Changes are saved
- [ ] Redirected to index with success message
- [ ] Changes are reflected in the list

---

### TC-1.3.7: Delete Leave Type (No Requests)

**Steps:**
1. Log in as an admin
2. Create a new leave type (or use one with 0 requests)
3. Click "Delete" on that leave type
4. Confirm the deletion

**Expected Results:**
- [ ] Confirmation dialog appears
- [ ] Leave type is deleted (soft deleted)
- [ ] Success message shown
- [ ] Type no longer appears in list

---

### TC-1.3.8: Cannot Delete Leave Type With Requests

**Steps:**
1. Log in as an admin
2. Find a leave type that has existing leave requests (count > 0)
3. Try to delete it

**Expected Results:**
- [ ] Delete button/link is not visible OR
- [ ] Error message explains why it cannot be deleted
- [ ] Leave type is NOT deleted

---

### TC-1.3.9: Property Badges Display

**Steps:**
1. Log in as an admin
2. Create leave types with different property combinations:
   - Type A: Requires Approval = Yes, Affects Allowance = Yes, Paid = Yes
   - Type B: Requires Approval = No, Affects Allowance = No, Paid = No
   - Type C: Mixed properties

**Expected Results:**
- [ ] "Approval Required" badge shows only when enabled
- [ ] "Uses Allowance" badge shows only when enabled
- [ ] "Paid" badge shows when paid, "Unpaid" shows when not paid
- [ ] Badges have correct colors

---

### TC-1.3.10: Inactive Leave Type

**Steps:**
1. Log in as an admin
2. Create or edit a leave type
3. Uncheck "Active"
4. Save

**Expected Results:**
- [ ] Leave type shows "Inactive" status badge
- [ ] Inactive leave types should not appear in leave request forms

---

### TC-1.3.11: Tenant Isolation

**Steps:**
1. Create a leave type as Admin of Tenant A
2. Log in as Admin of Tenant B
3. Try to access the leave type from Tenant A

**Expected Results:**
- [ ] Admin B cannot see Tenant A's leave types
- [ ] Direct URL access returns 403 or 404
- [ ] Each tenant has separate leave types

---

## Notes

- Record any bugs or issues found during testing
- Note the browser and device used for testing
- Screenshot any unexpected behavior
