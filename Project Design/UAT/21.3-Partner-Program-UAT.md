# UAT: Feature 21.3 - Partner/Reseller Program

## Test Environment Setup

**Prerequisites:**
- Partner registration enabled in system
- Test email addresses for partner registration
- Existing tenants for referral testing
- Admin access to partner management
- Commission structure configured

**Test URL:** `/partner`, `/partner/dashboard`, `/admin/partners`

---

## Test Cases

### TC-21.3.1: Partner Registration Page Access

**Steps:**
1. Navigate to partner registration page
2. View the partner program information

**Expected Results:**
- [ ] Partner registration page loads
- [ ] Program benefits explained
- [ ] Commission structure shown
- [ ] Registration form visible

---

### TC-21.3.2: Partner Registration Flow

**Steps:**
1. Navigate to partner registration
2. Fill in company/individual details
3. Accept partner terms
4. Submit registration

**Expected Results:**
- [ ] Required fields validated
- [ ] Terms acceptance required
- [ ] Registration submitted successfully
- [ ] Confirmation email sent
- [ ] Pending approval status shown

---

### TC-21.3.3: Partner Approval Process (Admin)

**Steps:**
1. Log in as platform admin
2. Navigate to Admin > Partners
3. Find pending partner registration
4. Review and approve

**Expected Results:**
- [ ] Pending partners listed
- [ ] Can view partner details
- [ ] Approve/reject options available
- [ ] Partner notified on approval

---

### TC-21.3.4: Unique Referral Code Generation

**Steps:**
1. After partner approval, log in as partner
2. Navigate to Partner Dashboard
3. View referral code

**Expected Results:**
- [ ] Unique referral code displayed
- [ ] Code is memorable/usable
- [ ] Referral link generated
- [ ] Can copy code/link easily

---

### TC-21.3.5: Referral Link Functionality

**Steps:**
1. Copy partner referral link
2. Open in incognito/new browser
3. Register a new tenant using the link

**Expected Results:**
- [ ] Link works correctly
- [ ] Referral tracked to partner
- [ ] New tenant registration proceeds normally
- [ ] No error or broken tracking

---

### TC-21.3.6: Referral Code at Registration

**Steps:**
1. Start tenant registration normally
2. Enter partner referral code in promo/referral field
3. Complete registration

**Expected Results:**
- [ ] Referral code accepted
- [ ] Tracked to referring partner
- [ ] No discount required (unless configured)
- [ ] Registration completes normally

---

### TC-21.3.7: Track Referrals in Partner Dashboard

**Steps:**
1. Complete a referral (new tenant signs up)
2. Log in as partner
3. View Partner Dashboard

**Expected Results:**
- [ ] New referral appears in list
- [ ] Shows tenant name (may be anonymized)
- [ ] Shows signup date
- [ ] Shows status (active, trial, paid)

---

### TC-21.3.8: Commission Calculation

**Steps:**
1. Referred tenant upgrades to paid plan
2. First payment is processed
3. Check partner dashboard for commission

**Expected Results:**
- [ ] Commission calculated based on payment
- [ ] Commission rate matches agreement
- [ ] Shows pending commission amount
- [ ] Calculation is transparent

---

### TC-21.3.9: Recurring Commission Tracking

**Steps:**
1. Referred tenant continues paying monthly
2. Check partner dashboard each month

**Expected Results:**
- [ ] Commission accrues each billing cycle
- [ ] Lifetime value tracked
- [ ] Recurring revenue shown
- [ ] Commission history available

---

### TC-21.3.10: Partner Dashboard - Earnings Overview

**Steps:**
1. Log in as partner
2. View Partner Dashboard earnings section

**Expected Results:**
- [ ] Total earnings shown
- [ ] Pending payout amount
- [ ] Paid out amount
- [ ] Earnings by period (monthly/quarterly)

---

### TC-21.3.11: Partner Dashboard - Referred Tenants List

**Steps:**
1. Log in as partner
2. View referred tenants section

**Expected Results:**
- [ ] List of all referred tenants
- [ ] Status of each (trial, active, churned)
- [ ] Revenue generated per tenant
- [ ] Join date and tenure

---

### TC-21.3.12: Payout Request System

**Steps:**
1. Accrue commission above minimum threshold
2. Navigate to Payouts section
3. Request a payout

**Expected Results:**
- [ ] Payout request option available
- [ ] Minimum threshold enforced
- [ ] Payment method selection
- [ ] Request submitted successfully

---

### TC-21.3.13: Payout Processing (Admin)

**Steps:**
1. Partner submits payout request
2. Log in as platform admin
3. Process the payout request

**Expected Results:**
- [ ] Pending payouts visible in admin
- [ ] Can approve/process payout
- [ ] Payment initiated
- [ ] Partner notified of payment

---

### TC-21.3.14: Partner Referral with Discount

**Steps:**
1. If configured, test referral link with tenant discount
2. New tenant signs up via referral
3. Check if discount applied

**Expected Results:**
- [ ] Discount applied to new tenant (if configured)
- [ ] Partner still earns commission
- [ ] Discount shown in tenant billing
- [ ] Win-win scenario works

---

### TC-21.3.15: Partner Account Deactivation

**Steps:**
1. Admin deactivates a partner account
2. Check referral link behavior
3. Check existing referrals

**Expected Results:**
- [ ] Referral link no longer tracks to partner
- [ ] Existing referrals preserved
- [ ] Earned commissions honored
- [ ] Partner dashboard shows inactive status

---

## Notes

- Record any bugs or issues found during testing
- Test with multiple partners and referrals
- Verify commission calculations manually
- Document edge cases (refunds, chargebacks, etc.)
