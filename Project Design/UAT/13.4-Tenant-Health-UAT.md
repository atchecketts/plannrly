# UAT: Feature 13.4 - Tenant Health Dashboard

## Test Environment Setup

**Prerequisites:**
- SuperAdmin user account
- Multiple tenants with varying activity levels
- Tenants with recent logins and tenants with no recent activity
- Tenants with past due payments
- Tenants actively using features vs inactive tenants

**Test URL:** `/super-admin/analytics/tenant-health`

---

## Test Cases

### TC-13.4.1: Access Tenant Health Dashboard (SuperAdmin)

**Steps:**
1. Log in as a SuperAdmin
2. Navigate to "Analytics" in the super-admin sidebar
3. Click on "Tenant Health"

**Expected Results:**
- [ ] Page loads successfully
- [ ] Tenant health overview is displayed
- [ ] Health indicators are visible
- [ ] At-risk accounts section is present

---

### TC-13.4.2: Non-SuperAdmin Cannot Access

**Steps:**
1. Log in as a regular admin or employee
2. Try to navigate to `/super-admin/analytics/tenant-health` directly

**Expected Results:**
- [ ] Access is denied (403 error)
- [ ] No tenant health data is exposed

---

### TC-13.4.3: Last Login Health Indicator

**Steps:**
1. Log in as SuperAdmin
2. Navigate to Tenant Health Dashboard
3. View last login metrics for tenants

**Expected Results:**
- [ ] Shows last login date per tenant
- [ ] Tenants with login < 7 days marked healthy (green)
- [ ] Tenants with login > 30 days marked at-risk (red)
- [ ] Intermediate ranges shown with appropriate color

---

### TC-13.4.4: Shift Creation Health Indicator

**Steps:**
1. Log in as SuperAdmin
2. Navigate to Tenant Health Dashboard
3. View shift creation metrics

**Expected Results:**
- [ ] Shows shifts created per week per tenant
- [ ] Tenants with > 10 shifts/week marked healthy
- [ ] Tenants with 0 shifts in 2 weeks marked at-risk
- [ ] Activity trend is visible

---

### TC-13.4.5: Active Users Percentage

**Steps:**
1. Log in as SuperAdmin
2. Navigate to Tenant Health Dashboard
3. View active users percentage per tenant

**Expected Results:**
- [ ] Shows percentage of active users per tenant
- [ ] Tenants with > 50% active users marked healthy
- [ ] Tenants with < 20% active users marked at-risk
- [ ] Total user count context provided

---

### TC-13.4.6: Payment Status Indicator

**Steps:**
1. Log in as SuperAdmin
2. Navigate to Tenant Health Dashboard
3. View payment status for tenants

**Expected Results:**
- [ ] Current payment status shown
- [ ] Past due tenants highlighted in red
- [ ] Days overdue displayed
- [ ] Quick action to view billing details

---

### TC-13.4.7: Tenant Health Score Calculation

**Steps:**
1. Log in as SuperAdmin
2. Navigate to Tenant Health Dashboard
3. View overall health score for a tenant

**Expected Results:**
- [ ] Health score is calculated (0-100 or similar)
- [ ] Score considers all health indicators
- [ ] Score breakdown is available
- [ ] Score updates based on tenant activity

---

### TC-13.4.8: At-Risk Accounts List

**Steps:**
1. Log in as SuperAdmin
2. Navigate to Tenant Health Dashboard
3. View the at-risk accounts section

**Expected Results:**
- [ ] At-risk tenants are listed prominently
- [ ] Sorted by risk level (highest first)
- [ ] Shows specific risk factors for each
- [ ] Quick actions available (contact, review)

---

### TC-13.4.9: Activity Metrics Per Tenant

**Steps:**
1. Log in as SuperAdmin
2. Navigate to Tenant Health Dashboard
3. Click on a specific tenant for details

**Expected Results:**
- [ ] Detailed activity metrics shown
- [ ] Login frequency displayed
- [ ] Feature usage breakdown visible
- [ ] Historical activity trends charted

---

### TC-13.4.10: Health Score Visualization

**Steps:**
1. Log in as SuperAdmin
2. Navigate to Tenant Health Dashboard
3. View health score visualization

**Expected Results:**
- [ ] Health scores displayed visually (gauge, color-coded)
- [ ] Distribution of health scores shown
- [ ] Healthy vs at-risk count displayed
- [ ] Visualization is intuitive

---

### TC-13.4.11: Alert Thresholds Configuration

**Steps:**
1. Log in as SuperAdmin
2. Navigate to Tenant Health settings
3. Adjust alert threshold values

**Expected Results:**
- [ ] Threshold settings are configurable
- [ ] Can adjust "at-risk" definitions
- [ ] Changes affect health calculations
- [ ] Settings are saved and persist

---

### TC-13.4.12: Filter and Sort Tenants

**Steps:**
1. Log in as SuperAdmin
2. Navigate to Tenant Health Dashboard
3. Filter by health status (healthy/at-risk)
4. Sort by different metrics

**Expected Results:**
- [ ] Filter by health status works
- [ ] Sort by health score works
- [ ] Sort by last login works
- [ ] Sort by activity level works

---

### TC-13.4.13: Tenant Health Export

**Steps:**
1. Log in as SuperAdmin
2. Navigate to Tenant Health Dashboard
3. Export tenant health data

**Expected Results:**
- [ ] Export option is available
- [ ] Data exports in expected format
- [ ] All health metrics included
- [ ] At-risk flags included in export

---

### TC-13.4.14: Empty Tenant Health

**Steps:**
1. Log in as SuperAdmin on system with no tenants
2. Navigate to Tenant Health Dashboard

**Expected Results:**
- [ ] Page handles no tenants gracefully
- [ ] Appropriate empty state message
- [ ] No errors or crashes

---

## Notes

- Record any bugs or issues found during testing
- Note the browser and device used for testing
- Screenshot any unexpected behavior
- Verify health scores correlate with expected activity
