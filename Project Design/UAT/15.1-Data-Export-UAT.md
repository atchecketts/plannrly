# UAT: Feature 15.1 - Data Export (Right to Access)

## Test Environment Setup

**Prerequisites:**
- Employee user account with data (profile, shifts, time entries, leave requests)
- Admin user account
- Email service configured for download links
- Background job processing enabled

**Test URL:** `/settings/data-export`

---

## Test Cases

### TC-15.1.1: Access Data Export Page (Employee)

**Steps:**
1. Log in as an employee
2. Navigate to account settings
3. Click on "Data Export" or "Export My Data"

**Expected Results:**
- [ ] Data export page loads successfully
- [ ] Explanation of data export is shown
- [ ] Request export button is visible
- [ ] Information about processing time shown

---

### TC-15.1.2: Access Data Export Page (Admin)

**Steps:**
1. Log in as an admin
2. Navigate to settings or employee management
3. Access data export functionality

**Expected Results:**
- [ ] Admin can request export for self
- [ ] Admin may have option to export for employees
- [ ] Clear distinction between self and employee exports

---

### TC-15.1.3: Request Data Export

**Steps:**
1. Log in as any user
2. Navigate to data export page
3. Click "Request Data Export"
4. Confirm the request

**Expected Results:**
- [ ] Export request is submitted
- [ ] Confirmation message displayed
- [ ] User informed of email notification
- [ ] Request is logged in audit trail

---

### TC-15.1.4: Export Request Logged in Audit Trail

**Steps:**
1. Submit a data export request
2. Log in as admin
3. Check audit logs

**Expected Results:**
- [ ] Export request appears in audit log
- [ ] Shows who requested the export
- [ ] Shows timestamp of request
- [ ] Maintains GDPR compliance records

---

### TC-15.1.5: JSON Export Generated

**Steps:**
1. Request a data export
2. Wait for processing to complete
3. Download the export file (JSON format)

**Expected Results:**
- [ ] JSON file is generated
- [ ] File is properly formatted
- [ ] Contains all user personal data
- [ ] Data structure is readable

---

### TC-15.1.6: CSV Export Option

**Steps:**
1. Navigate to data export page
2. Select CSV format option (if available)
3. Request export

**Expected Results:**
- [ ] CSV format option is available
- [ ] CSV file is generated correctly
- [ ] Data is properly delimited
- [ ] Opens correctly in spreadsheet software

---

### TC-15.1.7: Export Contains Profile Data

**Steps:**
1. Request and download data export
2. Open the export file
3. Verify profile data

**Expected Results:**
- [ ] Name is included
- [ ] Email is included
- [ ] Phone number is included (if on file)
- [ ] Address is included (if on file)
- [ ] All profile fields present

---

### TC-15.1.8: Export Contains Shift Data

**Steps:**
1. Request and download data export
2. Verify shift data in export

**Expected Results:**
- [ ] All shifts assigned to user included
- [ ] Shift dates and times present
- [ ] Shift locations included
- [ ] Historical shifts included

---

### TC-15.1.9: Export Contains Time Entries

**Steps:**
1. Request and download data export
2. Verify time entry data

**Expected Results:**
- [ ] All time clock entries included
- [ ] Clock in/out times present
- [ ] Break times included
- [ ] Notes included

---

### TC-15.1.10: Export Contains Leave Requests

**Steps:**
1. Request and download data export
2. Verify leave request data

**Expected Results:**
- [ ] All leave requests included
- [ ] Request dates and types present
- [ ] Approval status included
- [ ] Reasons/notes included

---

### TC-15.1.11: Background Job Processing

**Steps:**
1. Request a data export
2. Monitor job processing

**Expected Results:**
- [ ] Export runs as background job
- [ ] Does not block user interface
- [ ] Large exports handled without timeout
- [ ] Progress indication if lengthy

---

### TC-15.1.12: Email Notification with Download Link

**Steps:**
1. Request a data export
2. Wait for processing to complete
3. Check email inbox

**Expected Results:**
- [ ] Email notification is received
- [ ] Contains secure download link
- [ ] Link has expiration time
- [ ] Clear instructions provided

---

### TC-15.1.13: Secure Download Link

**Steps:**
1. Receive data export notification email
2. Click the download link
3. Attempt to access link after expiration

**Expected Results:**
- [ ] Link requires authentication OR has secure token
- [ ] File downloads successfully when valid
- [ ] Expired link shows appropriate message
- [ ] Cannot guess other users' export links

---

### TC-15.1.14: Export Request Cooldown

**Steps:**
1. Request a data export
2. Immediately try to request another export

**Expected Results:**
- [ ] Cooldown period enforced (if implemented)
- [ ] Message explains when next request allowed
- [ ] Prevents abuse of export feature

---

### TC-15.1.15: Export Excludes System Data

**Steps:**
1. Request and download data export
2. Review all data in export

**Expected Results:**
- [ ] Export contains only personal data
- [ ] System/internal IDs minimized
- [ ] No sensitive system configurations
- [ ] Complies with GDPR right to access

---

## Notes

- Record any bugs or issues found during testing
- Note the browser and device used for testing
- Screenshot any unexpected behavior
- Verify export complies with GDPR Article 15 requirements
