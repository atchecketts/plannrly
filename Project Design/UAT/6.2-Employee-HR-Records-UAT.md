# UAT: Feature 6.2 - Employee HR Records (Admin)

## Test Environment Setup

**Prerequisites:**
- One admin user with full access
- Multiple employees with varying employment statuses
- Employees with hourly and salaried pay types
- Employees with role-specific hourly rates configured
- Employees in probation period
- Employees on notice period

**Test URL:** `/users/{id}/employment`

---

## Test Cases

### TC-6.2.1: Access Employee HR Records (Admin)

**Steps:**
1. Log in as an admin
2. Navigate to Users list
3. Click on an employee
4. Click on "Employment Details" or HR tab

**Expected Results:**
- [ ] Employment details section loads successfully
- [ ] Shows comprehensive HR information
- [ ] All employment fields are visible
- [ ] Edit functionality is available

---

### TC-6.2.2: Access HR Records (Employee - Denied)

**Steps:**
1. Log in as an employee
2. Attempt to navigate to another employee's employment details
3. Attempt to access your own HR admin page directly

**Expected Results:**
- [ ] Access is denied to other employees' records
- [ ] Employee cannot access admin HR interface
- [ ] Appropriate error message or redirect

---

### TC-6.2.3: View Employment Start Date

**Steps:**
1. Log in as an admin
2. Navigate to an employee's employment details
3. View the employment start date field

**Expected Results:**
- [ ] Start date is displayed
- [ ] Date format is correct and readable
- [ ] Field is editable

---

### TC-6.2.4: Set Employment End Date (Fixed-Term)

**Steps:**
1. Log in as an admin
2. Navigate to a fixed-term employee's employment details
3. Set or view the employment end date

**Expected Results:**
- [ ] Employment end date can be set
- [ ] Must be after start date
- [ ] Used for fixed-term contract tracking
- [ ] Shows remaining days until contract ends

---

### TC-6.2.5: Set Final Working Date (Leaving Employee)

**Steps:**
1. Log in as an admin
2. Navigate to an employee who is leaving
3. Set the final working date
4. Save changes

**Expected Results:**
- [ ] Final working date can be set
- [ ] Must be a future or current date
- [ ] Employment status should update accordingly
- [ ] Employee appears in "leaving soon" reports

---

### TC-6.2.6: Set Probation End Date

**Steps:**
1. Log in as an admin
2. Navigate to a new employee's HR records
3. Set the probation end date
4. Save changes

**Expected Results:**
- [ ] Probation end date can be set
- [ ] Date validation works correctly
- [ ] Shows remaining probation period
- [ ] Can be cleared when probation is passed

---

### TC-6.2.7: Change Employment Status

**Steps:**
1. Log in as an admin
2. Navigate to an employee's HR records
3. Change employment status from "Active" to "On Leave"
4. Save changes
5. Change to "Notice Period"
6. Change to "Terminated"

**Expected Results:**
- [ ] All status options are available (Active, On Leave, Suspended, Notice Period, Terminated)
- [ ] Status changes save correctly
- [ ] Status badge updates on employee list
- [ ] Terminated employees cannot be scheduled

---

### TC-6.2.8: Configure Hourly Pay Type

**Steps:**
1. Log in as an admin
2. Navigate to an employee's HR records
3. Set pay type to "Hourly"
4. Enter base hourly rate (e.g., 15.00)
5. Save changes

**Expected Results:**
- [ ] Pay type dropdown shows Hourly/Salaried options
- [ ] Base hourly rate field accepts decimal values
- [ ] Currency is displayed correctly
- [ ] Rate is saved and displayed

---

### TC-6.2.9: Configure Salaried Pay Type

**Steps:**
1. Log in as an admin
2. Navigate to an employee's HR records
3. Set pay type to "Salaried"
4. Enter annual salary (e.g., 45000.00)
5. Save changes

**Expected Results:**
- [ ] Annual salary field appears when salaried is selected
- [ ] Accepts decimal values
- [ ] Currency is displayed correctly
- [ ] Hourly rate field may be hidden or calculated

---

### TC-6.2.10: Set Target Hours Per Week

**Steps:**
1. Log in as an admin
2. Navigate to an employee's HR records
3. Set target hours per week (e.g., 40)
4. Set minimum hours (e.g., 20)
5. Set maximum hours (e.g., 48)
6. Save changes

**Expected Results:**
- [ ] Target hours field accepts decimal values
- [ ] Min/max hours are validated (min <= target <= max)
- [ ] Values are saved correctly
- [ ] Used in scheduling and reports

---

### TC-6.2.11: Set Overtime Eligibility

**Steps:**
1. Log in as an admin
2. Navigate to an employee's HR records
3. Check/uncheck "Overtime Eligible" checkbox
4. Save changes

**Expected Results:**
- [ ] Overtime eligible toggle works
- [ ] Setting is saved correctly
- [ ] Affects overtime calculations in reports

---

### TC-6.2.12: Add HR Notes

**Steps:**
1. Log in as an admin
2. Navigate to an employee's HR records
3. Add private HR notes
4. Save changes

**Expected Results:**
- [ ] Notes field accepts free-form text
- [ ] Notes are saved successfully
- [ ] Notes are NOT visible to the employee
- [ ] Only admins/HR can view notes

---

### TC-6.2.13: Role-Specific Pay Rate Override

**Steps:**
1. Log in as an admin
2. Navigate to an employee with multiple business roles
3. Find the "Role-Specific Hourly Rates" section in Employment Details
4. Set a custom hourly rate for one specific role (e.g., $22.50)
5. Leave another role's rate blank
6. Save changes
7. View the user's profile page

**Expected Results:**
- [ ] "Role-Specific Hourly Rates" section shows all assigned business roles
- [ ] Each role shows its default rate as reference (e.g., "Default: 15.00")
- [ ] Can enter custom rate per role
- [ ] Custom rate is saved in database
- [ ] User show page displays effective rate for each role
- [ ] Custom rates show "Custom rate" label
- [ ] Default rates show "Default rate" label
- [ ] Falls back to role default if left blank

---

### TC-6.2.14: Pay Rate Hierarchy Logic

**Steps:**
1. Log in as an admin
2. Create/view employee with:
   - Role-specific rate for Role A: $20/hr
   - Base hourly rate: $15/hr
   - Role default rate for Role B: $12/hr
3. Verify rates used for different role assignments

**Expected Results:**
- [ ] Role A uses role-specific rate ($20/hr)
- [ ] Role B uses role default rate ($12/hr) if no user base rate
- [ ] Role B uses user base rate ($15/hr) if set and no role-specific
- [ ] Hierarchy: Role-specific > User base > Role default

---

### TC-6.2.15: Employment Status Badges on User List

**Steps:**
1. Log in as an admin
2. Set different employment statuses for multiple employees
3. Navigate to the Users list

**Expected Results:**
- [ ] Status badges are visible on user list
- [ ] Different colors for different statuses
- [ ] "Active" may not need a badge (default)
- [ ] "On Leave", "Notice Period" clearly highlighted

---

### TC-6.2.16: Employees Leaving Soon Dashboard Widget

**Steps:**
1. Log in as an admin
2. Set final working dates for employees (within 30 days)
3. Navigate to the admin dashboard

**Expected Results:**
- [ ] Dashboard shows "Employees Leaving Soon" section
- [ ] Lists employees with upcoming final working dates
- [ ] Shows days remaining
- [ ] Links to employee profile

---

### TC-6.2.17: Form Validation - Invalid Data

**Steps:**
1. Log in as an admin
2. Navigate to employment details
3. Try to set end date before start date
4. Try to set negative hourly rate
5. Try to set min hours > max hours

**Expected Results:**
- [ ] Date validation prevents invalid ranges
- [ ] Negative values are rejected
- [ ] Min/max validation is enforced
- [ ] Clear error messages are displayed

---

### TC-6.2.18: Employee Views Own Hourly Rates (Read-Only)

**Steps:**
1. Log in as an employee with assigned business roles and custom hourly rates
2. Navigate to your profile page
3. View the Business Roles section

**Expected Results:**
- [ ] Business Roles section displays all assigned roles
- [ ] Effective hourly rate shown for each role
- [ ] Rates are read-only (no edit capability)
- [ ] Employee cannot access Employment Details edit page

---

### TC-6.2.19: Clear Role-Specific Rate (Revert to Default)

**Steps:**
1. Log in as an admin
2. Navigate to an employee with a custom role-specific rate set
3. In the "Role-Specific Hourly Rates" section, clear the custom rate (empty the field)
4. Save changes
5. View the user's profile page

**Expected Results:**
- [ ] Empty value is accepted and saved
- [ ] Database shows hourly_rate as NULL for that role
- [ ] User show page now displays the role's default rate
- [ ] "Default rate" label shown instead of "Custom rate"

---

### TC-6.2.20: Role Rates Section Hidden When No Roles Assigned

**Steps:**
1. Log in as an admin
2. Navigate to employment details for an employee with NO business roles assigned

**Expected Results:**
- [ ] "Role-Specific Hourly Rates" section is NOT displayed
- [ ] Form still functions normally for other fields
- [ ] No errors when saving

---

## Notes

- Record any bugs or issues found during testing
- Note the browser and device used for testing
- Screenshot any unexpected behavior
- Verify pay rate calculations with manual checks
- Ensure HR notes are truly private (test as employee)
