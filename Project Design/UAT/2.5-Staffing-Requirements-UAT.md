# UAT: Feature 2.5 - Staffing Requirements & Coverage Warnings

## Test Environment Setup

**Prerequisites:**
- One admin user
- Multiple employees with different business roles
- At least two locations
- At least two departments
- Published shifts on the schedule

**Test URLs:**
- Staffing Requirements: `/staffing-requirements`
- Schedule: `/schedule`

---

## Test Cases

### TC-2.5.1: View Staffing Requirements Index

**Steps:**
1. Log in as an admin
2. Navigate to Settings
3. Click "Staffing Requirements"

**Expected Results:**
- [ ] Page loads successfully
- [ ] Shows list of existing requirements (or empty state)
- [ ] "Add Requirement" button is visible
- [ ] Each requirement shows role, days, times, min/max

---

### TC-2.5.2: Create Staffing Requirement

**Steps:**
1. Log in as an admin
2. Navigate to Staffing Requirements
3. Click "Add Requirement"
4. Fill in the form:
   - Select business role (e.g., "Waiter")
   - Select day(s) of week (e.g., Monday-Friday)
   - Set time window (e.g., 09:00-17:00)
   - Set minimum employees: 2
   - Set maximum employees: 4
5. Save

**Expected Results:**
- [ ] Form submits successfully
- [ ] Requirement appears in list
- [ ] All fields saved correctly
- [ ] Success message displayed

---

### TC-2.5.3: Create Location-Specific Requirement

**Steps:**
1. Log in as an admin
2. Create staffing requirement
3. Select specific location from dropdown
4. Fill other fields
5. Save

**Expected Results:**
- [ ] Location dropdown is available
- [ ] Requirement is scoped to selected location
- [ ] Only applies to that location's schedule
- [ ] List shows location scope

---

### TC-2.5.4: Create Department-Specific Requirement

**Steps:**
1. Log in as an admin
2. Create staffing requirement
3. Select specific department from dropdown
4. Fill other fields
5. Save

**Expected Results:**
- [ ] Department dropdown is available
- [ ] Requirement is scoped to department
- [ ] Combined with location if both selected
- [ ] Scope displayed correctly in list

---

### TC-2.5.5: Edit Staffing Requirement

**Steps:**
1. Log in as an admin
2. Navigate to Staffing Requirements
3. Click "Edit" on an existing requirement
4. Change minimum from 2 to 3
5. Save changes

**Expected Results:**
- [ ] Edit form shows current values
- [ ] Changes are saved
- [ ] List updates with new values
- [ ] Schedule coverage updates

---

### TC-2.5.6: Delete Staffing Requirement

**Steps:**
1. Log in as an admin
2. Navigate to Staffing Requirements
3. Click "Delete" on a requirement
4. Confirm deletion

**Expected Results:**
- [ ] Confirmation dialog appears
- [ ] Requirement is deleted
- [ ] Coverage indicators update
- [ ] Success message shown

---

### TC-2.5.7: Coverage Indicator - Adequate Staffing

**Steps:**
1. Log in as an admin
2. Create requirement: Role=Waiter, Min=2, Max=4, Time=09:00-17:00
3. Schedule 3 Waiters for that time slot
4. View schedule

**Expected Results:**
- [ ] Coverage indicator shows GREEN
- [ ] Tooltip shows "Adequate staffing"
- [ ] Shows 3 of 2-4 required
- [ ] No warnings displayed

---

### TC-2.5.8: Coverage Indicator - Understaffed

**Steps:**
1. Log in as an admin
2. Create requirement: Role=Waiter, Min=3, Time=09:00-17:00
3. Schedule only 1 Waiter for that time
4. View schedule

**Expected Results:**
- [ ] Coverage indicator shows RED or ORANGE
- [ ] Tooltip shows "Understaffed - Need 2 more Waiters"
- [ ] Warning is prominent on schedule
- [ ] Day/cell clearly marked

---

### TC-2.5.9: Coverage Indicator - Overstaffed

**Steps:**
1. Log in as an admin
2. Create requirement: Role=Chef, Max=2, Time=09:00-17:00
3. Schedule 4 Chefs for that time
4. View schedule

**Expected Results:**
- [ ] Coverage indicator shows YELLOW
- [ ] Tooltip shows "Overstaffed"
- [ ] Shows 4 of max 2
- [ ] Warning indicates excess

---

### TC-2.5.10: Week View Coverage Summary

**Steps:**
1. Log in as an admin
2. Configure multiple staffing requirements
3. Create schedule with gaps and overages
4. View week view

**Expected Results:**
- [ ] Coverage summary bar/widget visible
- [ ] Shows count of understaffed slots
- [ ] Shows count of overstaffed slots
- [ ] Click navigates to problem areas

---

### TC-2.5.11: Day View Coverage Timeline

**Steps:**
1. Log in as an admin
2. Navigate to schedule day view
3. Observe coverage indicators in timeline header

**Expected Results:**
- [ ] Time slots color-coded by coverage
- [ ] Red for understaffed windows
- [ ] Yellow for overstaffed windows
- [ ] Green for adequate coverage
- [ ] Coverage panel shows details

---

### TC-2.5.12: Multiple Time Windows Same Day

**Steps:**
1. Log in as an admin
2. Create requirement: Role=Waiter, 09:00-12:00, Min=2
3. Create requirement: Role=Waiter, 12:00-17:00, Min=4
4. Schedule and check coverage

**Expected Results:**
- [ ] Each time window evaluated separately
- [ ] Morning shows coverage status
- [ ] Afternoon shows different coverage status
- [ ] Transitions handled correctly

---

### TC-2.5.13: Weekend Different Requirements

**Steps:**
1. Log in as an admin
2. Create requirement: Weekdays (Mon-Fri), Min=2
3. Create requirement: Weekends (Sat-Sun), Min=4
4. View coverage across week

**Expected Results:**
- [ ] Weekday requirements apply Mon-Fri
- [ ] Weekend requirements apply Sat-Sun
- [ ] Different staffing levels expected
- [ ] Coverage calculated correctly per day type

---

### TC-2.5.14: Deactivate Staffing Requirement

**Steps:**
1. Log in as an admin
2. Edit an existing staffing requirement
3. Uncheck "Active" or toggle to inactive
4. Save

**Expected Results:**
- [ ] Requirement marked as inactive
- [ ] Coverage indicators no longer use this rule
- [ ] Inactive rules shown differently in list
- [ ] Can reactivate later

---

### TC-2.5.15: Employee Cannot Access Staffing Requirements

**Steps:**
1. Log in as an employee
2. Try to navigate to `/staffing-requirements`

**Expected Results:**
- [ ] Access denied (403)
- [ ] Menu item not visible to employees
- [ ] Coverage warnings may still show to employees (read-only)

---

## Notes

- Record any bugs or issues found during testing
- Note the browser and device used for testing
- Screenshot any unexpected behavior
- Test with various staffing requirement combinations
