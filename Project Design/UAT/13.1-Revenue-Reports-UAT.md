# UAT: Feature 13.1 - Revenue Reports

## Test Environment Setup

**Prerequisites:**
- SuperAdmin user account
- Multiple tenants with active subscriptions
- Tenants on different subscription plans
- Some tenants with add-on features enabled
- Historical subscription data (at least 3 months)

**Test URL:** `/super-admin/analytics/revenue`

---

## Test Cases

### TC-13.1.1: Access Revenue Reports (SuperAdmin)

**Steps:**
1. Log in as a SuperAdmin
2. Navigate to "Analytics" in the super-admin sidebar
3. Click on "Revenue Reports"

**Expected Results:**
- [ ] Page loads successfully
- [ ] Revenue dashboard displays correctly
- [ ] MRR and ARR metrics are visible
- [ ] Charts render without errors

---

### TC-13.1.2: Non-SuperAdmin Cannot Access

**Steps:**
1. Log in as a regular admin or employee
2. Try to navigate to `/super-admin/analytics/revenue` directly

**Expected Results:**
- [ ] Access is denied (403 error)
- [ ] Analytics menu is not visible in sidebar for non-SuperAdmins
- [ ] No revenue data is exposed

---

### TC-13.1.3: MRR Calculation Accuracy

**Steps:**
1. Log in as SuperAdmin
2. Navigate to Revenue Reports
3. Note the displayed MRR
4. Manually calculate MRR from known subscriptions

**Expected Results:**
- [ ] MRR is calculated correctly
- [ ] MRR includes all active subscriptions
- [ ] MRR excludes cancelled/paused subscriptions
- [ ] MRR calculation matches manual calculation

---

### TC-13.1.4: ARR Calculation

**Steps:**
1. Log in as SuperAdmin
2. Navigate to Revenue Reports
3. Verify ARR is displayed

**Expected Results:**
- [ ] ARR is displayed correctly
- [ ] ARR equals MRR multiplied by 12
- [ ] ARR updates when MRR changes

---

### TC-13.1.5: MRR Growth Display

**Steps:**
1. Log in as SuperAdmin
2. Navigate to Revenue Reports
3. View the MRR growth metric

**Expected Results:**
- [ ] Month-over-month growth percentage is shown
- [ ] Positive growth shows with green indicator
- [ ] Negative growth shows with red indicator
- [ ] Growth is calculated correctly from previous month

---

### TC-13.1.6: ARPU Calculation

**Steps:**
1. Log in as SuperAdmin
2. Navigate to Revenue Reports
3. View the ARPU (Average Revenue Per User) metric

**Expected Results:**
- [ ] ARPU is displayed correctly
- [ ] ARPU = Total MRR / Number of active subscriptions
- [ ] Calculation handles edge cases (zero subscriptions)

---

### TC-13.1.7: Revenue by Plan Breakdown

**Steps:**
1. Log in as SuperAdmin
2. Navigate to Revenue Reports
3. View the "Revenue by Plan" chart/table

**Expected Results:**
- [ ] All subscription plans are listed
- [ ] Revenue amount for each plan is accurate
- [ ] Percentage breakdown is shown
- [ ] Chart visualization matches the data

---

### TC-13.1.8: Revenue by Add-on Breakdown

**Steps:**
1. Log in as SuperAdmin
2. Navigate to Revenue Reports
3. View the "Revenue by Add-on" section

**Expected Results:**
- [ ] All add-on features are listed
- [ ] Revenue from each add-on is accurate
- [ ] Shows count of tenants using each add-on
- [ ] Total add-on revenue is calculated

---

### TC-13.1.9: MRR History Chart (12 Months)

**Steps:**
1. Log in as SuperAdmin
2. Navigate to Revenue Reports
3. View the MRR history chart

**Expected Results:**
- [ ] Chart shows 12 months of data
- [ ] Each month's MRR is plotted correctly
- [ ] Chart is interactive (hover for details)
- [ ] Trend line is visible

---

### TC-13.1.10: Date Range Filter

**Steps:**
1. Log in as SuperAdmin
2. Navigate to Revenue Reports
3. Apply a custom date range filter (e.g., last 6 months)
4. Apply another date range (e.g., last quarter)

**Expected Results:**
- [ ] Date range picker works correctly
- [ ] All metrics update based on selected range
- [ ] Charts update to reflect the date range
- [ ] Invalid date ranges are rejected

---

### TC-13.1.11: Data Refresh

**Steps:**
1. Log in as SuperAdmin
2. Navigate to Revenue Reports
3. Note current metrics
4. In another browser, update a subscription
5. Refresh the revenue reports page

**Expected Results:**
- [ ] Data refreshes on page reload
- [ ] Updated subscription data is reflected
- [ ] No stale/cached data is shown

---

### TC-13.1.12: Zero Revenue Scenario

**Steps:**
1. Log in as SuperAdmin on a system with no active subscriptions
2. Navigate to Revenue Reports

**Expected Results:**
- [ ] Page handles zero revenue gracefully
- [ ] Shows $0 for all metrics
- [ ] No errors or crashes
- [ ] Appropriate empty state message displayed

---

## Notes

- Record any bugs or issues found during testing
- Note the browser and device used for testing
- Screenshot any unexpected behavior
- Verify currency formatting is consistent
