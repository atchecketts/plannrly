# UAT: Feature 24.2 - Team Messaging System

## Test Environment Setup

**Prerequisites:**
- Multiple user accounts (employees, managers, admins)
- Real-time notification capability (Laravel Echo/WebSocket)
- Mobile device for testing notifications
- Group/team configurations in place

**Test URL:** `/messages`, `/announcements`

---

## Test Cases

### TC-24.2.1: View Messages Index

**Steps:**
1. Log in as any user
2. Navigate to Messages

**Expected Results:**
- [ ] Messages page loads successfully
- [ ] Shows conversation list (or empty state)
- [ ] Unread count visible
- [ ] New message button available

---

### TC-24.2.2: Start Direct Message Conversation

**Steps:**
1. Navigate to Messages
2. Click "New Message"
3. Select a single recipient
4. Type and send a message

**Expected Results:**
- [ ] User search/selection works
- [ ] Message input field available
- [ ] Message sends successfully
- [ ] Conversation created and visible

---

### TC-24.2.3: Send and Receive Messages (Real-Time)

**Steps:**
1. User A sends a message to User B
2. User B has Messages page open
3. Observe real-time delivery

**Expected Results:**
- [ ] Message appears without page refresh
- [ ] Near-instant delivery
- [ ] Visual notification of new message
- [ ] Conversation updates dynamically

---

### TC-24.2.4: View Conversation History

**Steps:**
1. Open an existing conversation
2. Scroll through message history

**Expected Results:**
- [ ] All messages shown in order
- [ ] Timestamps displayed
- [ ] Sender clearly identified
- [ ] Smooth scrolling and loading

---

### TC-24.2.5: Create Group Conversation

**Steps:**
1. Navigate to Messages
2. Click "New Message"
3. Select multiple recipients
4. Send a message

**Expected Results:**
- [ ] Can select multiple users
- [ ] Group conversation created
- [ ] All participants can see messages
- [ ] Group name/participants shown

---

### TC-24.2.6: Group Conversation - All Participants Receive

**Steps:**
1. Send message in group conversation
2. Check that all group members receive it

**Expected Results:**
- [ ] All participants see the message
- [ ] Real-time for online users
- [ ] Notification for offline users
- [ ] Consistent experience across all

---

### TC-24.2.7: Unread Message Count

**Steps:**
1. Receive messages while in another part of the app
2. Check navigation unread badge

**Expected Results:**
- [ ] Unread count in navigation
- [ ] Updates in real-time
- [ ] Count accurate
- [ ] Clears when messages read

---

### TC-24.2.8: Mark Conversation as Read

**Steps:**
1. Have unread messages
2. Open the conversation
3. Observe read status

**Expected Results:**
- [ ] Opening conversation marks as read
- [ ] Unread count decreases
- [ ] Read receipts work (if enabled)
- [ ] Smooth transition

---

### TC-24.2.9: Create Announcement

**Steps:**
1. Log in as manager or admin
2. Navigate to Announcements
3. Click "Create Announcement"
4. Enter title, message, audience
5. Publish

**Expected Results:**
- [ ] Announcement form works
- [ ] Can select audience (all, team, location)
- [ ] Publish succeeds
- [ ] Announcement appears in list

---

### TC-24.2.10: View Announcements

**Steps:**
1. Log in as an employee
2. Navigate to Announcements
3. View announcements for you

**Expected Results:**
- [ ] Relevant announcements shown
- [ ] Sorted by date (newest first)
- [ ] Can view full announcement
- [ ] Unread indicators visible

---

### TC-24.2.11: Announcement Acknowledgement

**Steps:**
1. View an announcement requiring acknowledgement
2. Click "Acknowledge" or similar

**Expected Results:**
- [ ] Acknowledge button available
- [ ] Acknowledgement recorded
- [ ] Timestamp saved
- [ ] Status updates for admin view

---

### TC-24.2.12: View Acknowledgement Tracking (Admin)

**Steps:**
1. Log in as admin/manager
2. View an announcement with acknowledgement requirement
3. Check acknowledgement status

**Expected Results:**
- [ ] Shows who acknowledged
- [ ] Shows who hasn't acknowledged
- [ ] Timestamps visible
- [ ] Can send reminder to unacknowledged

---

### TC-24.2.13: Notification for New Message

**Steps:**
1. User A is not on Messages page
2. User B sends User A a message
3. Check for notification

**Expected Results:**
- [ ] Browser notification (if enabled)
- [ ] In-app notification/badge
- [ ] Mobile push notification (if PWA)
- [ ] Clear indication of new message

---

### TC-24.2.14: Message Search

**Steps:**
1. Navigate to Messages
2. Use search functionality
3. Search for keyword in messages

**Expected Results:**
- [ ] Search field available
- [ ] Results show relevant conversations
- [ ] Can filter/sort results
- [ ] Clicking result opens conversation

---

### TC-24.2.15: Delete Message (If Allowed)

**Steps:**
1. Send a message
2. Try to delete it

**Expected Results:**
- [ ] Delete option available (or not per policy)
- [ ] If allowed, message removed
- [ ] Other participants notified (or see "deleted")
- [ ] Audit trail maintained

---

## Notes

- Record any bugs or issues found during testing
- Test real-time functionality with multiple browsers
- Verify notification delivery reliability
- Check mobile experience for messaging
- Test with slow network conditions
