# UAT: Feature 27.3 - Urgent Shift Coverage

## Test Environment Setup

**Prerequisites:**
- Admin/Manager user with scheduling permissions
- Multiple employees with same business role
- Published shifts assigned to employees
- Notification system configured (email, push)
- SMS configured (optional, for escalation testing)

**Test URL:** `/coverage`, `/shifts`

---

## Test Cases

### TC-27.3.1: Initiate Coverage Request from Shift

**Steps:**
1. Log in as admin/manager
2. Navigate to the schedule
3. Find a shift that needs coverage (e.g., employee called in sick)
4. Click on the shift
5. Select "Find Coverage" or "Request Coverage"

**Expected Results:**
- [ ] Coverage request option is available
- [ ] Opens coverage request form
- [ ] Shift details are pre-populated
- [ ] Can select priority level

---

### TC-27.3.2: Set Coverage Priority Levels

**Steps:**
1. Initiate a coverage request
2. View priority options
3. Select "Critical" (shift starts within 4 hours)
4. Change to "Urgent" (shift starts within 24 hours)
5. Change to "Normal" (shift starts in 24+ hours)

**Expected Results:**
- [ ] Three priority levels available
- [ ] Priority affects notification urgency
- [ ] Priority can be set manually
- [ ] System may suggest priority based on time

---

### TC-27.3.3: Select Eligible Employees

**Steps:**
1. Create a coverage request
2. View list of eligible employees
3. Observe filtering

**Expected Results:**
- [ ] Only employees with matching role shown
- [ ] Employees already working at that time excluded
- [ ] Employees on leave excluded
- [ ] Shows employee availability status
- [ ] Can select specific employees or "All eligible"

---

### TC-27.3.4: Send Coverage Notifications

**Steps:**
1. Complete coverage request form
2. Select target employees
3. Click "Send Request"
4. Verify notifications

**Expected Results:**
- [ ] Request is sent successfully
- [ ] Selected employees receive notifications
- [ ] Notification includes shift details
- [ ] Notification includes response link
- [ ] Admin sees confirmation

---

### TC-27.3.5: Critical Priority Escalation

**Steps:**
1. Create a coverage request with "Critical" priority
2. Send the request
3. Check notification channels

**Expected Results:**
- [ ] Push notification sent immediately
- [ ] SMS sent (if configured)
- [ ] Email sent
- [ ] All channels used for critical
- [ ] Notification clearly marked as urgent

---

### TC-27.3.6: Employee Receives Coverage Request

**Steps:**
1. Log in as an eligible employee
2. Check notifications
3. View the coverage request

**Expected Results:**
- [ ] Notification received (push/email/SMS)
- [ ] Notification shows shift details
- [ ] Notification shows urgency
- [ ] Link takes employee to response page
- [ ] Clear accept/decline options

---

### TC-27.3.7: Employee Accepts Coverage

**Steps:**
1. Log in as eligible employee
2. Open coverage request notification
3. Click "Accept" or "I can cover"
4. Confirm acceptance

**Expected Results:**
- [ ] Acceptance is recorded
- [ ] Employee is assigned to shift
- [ ] Original employee is unassigned
- [ ] Admin is notified
- [ ] Other employees notified (position filled)

---

### TC-27.3.8: Employee Declines Coverage

**Steps:**
1. Log in as eligible employee
2. Open coverage request
3. Click "Decline"
4. Optionally enter reason

**Expected Results:**
- [ ] Decline is recorded
- [ ] Employee removed from consideration
- [ ] Admin sees decline in dashboard
- [ ] Request remains open for others
- [ ] No negative impact on employee

---

### TC-27.3.9: Manager Coverage Dashboard

**Steps:**
1. Log in as admin/manager
2. Navigate to Coverage Dashboard
3. View active coverage requests

**Expected Results:**
- [ ] All open coverage requests visible
- [ ] Shows request priority
- [ ] Shows time until shift starts
- [ ] Shows response status (who accepted/declined)
- [ ] Can filter by priority or status

---

### TC-27.3.10: View Coverage Request Details

**Steps:**
1. Open coverage dashboard
2. Click on a specific coverage request
3. View details

**Expected Results:**
- [ ] Shows original shift details
- [ ] Shows reason for coverage need
- [ ] Shows list of contacted employees
- [ ] Shows who accepted/declined
- [ ] Shows timestamps

---

### TC-27.3.11: Auto-Assign Coverage

**Steps:**
1. Create a coverage request
2. Enable "Auto-assign first responder" option
3. Send request
4. Have an employee accept

**Expected Results:**
- [ ] First employee to accept is automatically assigned
- [ ] Shift is updated immediately
- [ ] Other employees notified (no longer needed)
- [ ] No manual admin intervention required
- [ ] Admin is notified of auto-assignment

---

### TC-27.3.12: Cancel Coverage Request

**Steps:**
1. Create and send a coverage request
2. Before it's filled, click "Cancel Request"
3. Confirm cancellation

**Expected Results:**
- [ ] Request can be cancelled
- [ ] Contacted employees notified
- [ ] Request removed from active list
- [ ] Original shift remains as-is
- [ ] Cancellation reason logged

---

### TC-27.3.13: Coverage Timeout/Expiry

**Steps:**
1. Create a coverage request
2. Let it remain unfilled until shift starts
3. Observe the request status

**Expected Results:**
- [ ] Request shows as expired/unfilled
- [ ] No more notifications sent
- [ ] Historical record preserved
- [ ] Manager alerted to unfilled shift

---

### TC-27.3.14: Coverage Tracking in Reports

**Steps:**
1. Navigate to reports
2. Find coverage or staffing report
3. Review coverage metrics

**Expected Results:**
- [ ] Shows total coverage requests
- [ ] Shows fill rate (% successfully filled)
- [ ] Shows average response time
- [ ] Can filter by date range
- [ ] Can filter by department

---

### TC-27.3.15: Multiple Responses Handling

**Steps:**
1. Create a coverage request without auto-assign
2. Have multiple employees accept
3. Log in as admin
4. Choose which employee to assign

**Expected Results:**
- [ ] Multiple acceptances are recorded
- [ ] Admin can see all who accepted
- [ ] Admin can choose preferred employee
- [ ] Chosen employee is assigned
- [ ] Others notified they weren't selected

---

## Notes

- Record any bugs or issues found during testing
- Note the browser and device used for testing
- Screenshot any unexpected behavior
- Test notification delivery timing
- Test with various shift start times for priority accuracy
