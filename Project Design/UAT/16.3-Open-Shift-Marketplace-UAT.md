# UAT: Feature 16.3 - Open Shift Marketplace

## Test Environment Setup

**Prerequisites:**
- Admin user account
- Multiple employee accounts with different qualifications
- Open (unassigned) shifts created
- Business roles and departments configured

**Test URLs:**
- Employee: `/open-shifts`
- Admin: `/open-shifts/claims`

---

## Test Cases

### TC-16.3.1: View Open Shifts (Employee)

**Steps:**
1. Log in as an employee
2. Navigate to "Open Shifts" in the sidebar

**Expected Results:**
- [ ] Open shifts page loads successfully
- [ ] List of available open shifts displayed
- [ ] Shifts filtered by employee's qualifications
- [ ] Shift details visible (date, time, location, role)

---

### TC-16.3.2: Filter Open Shifts by Qualifications

**Steps:**
1. Log in as employee with specific business role
2. Navigate to open shifts
3. Observe available shifts

**Expected Results:**
- [ ] Only shifts matching employee's role shown
- [ ] Shifts requiring other qualifications hidden
- [ ] Clear indication of qualification match

---

### TC-16.3.3: Filter Open Shifts by Availability

**Steps:**
1. Set availability to unavailable on Monday
2. Navigate to open shifts
3. Check if Monday shifts appear

**Expected Results:**
- [ ] Shifts conflicting with availability are hidden OR
- [ ] Shifts show warning about availability conflict
- [ ] Employee cannot claim unavailable shifts

---

### TC-16.3.4: Request to Claim Open Shift

**Steps:**
1. Log in as qualified employee
2. Navigate to open shifts
3. Find an available shift
4. Click "Claim" or "Request Shift"

**Expected Results:**
- [ ] Claim request is submitted
- [ ] Confirmation message shown
- [ ] Shift shows "Requested" status
- [ ] Employee cannot claim same shift twice

---

### TC-16.3.5: View My Claims

**Steps:**
1. Submit some shift claim requests
2. Navigate to view "My Claims" or similar

**Expected Results:**
- [ ] List of submitted claims shown
- [ ] Status of each claim visible (pending, approved, denied)
- [ ] Can cancel pending claims

---

### TC-16.3.6: Cancel Claim Request

**Steps:**
1. Submit a claim request
2. Before approval, click "Cancel Claim"

**Expected Results:**
- [ ] Cancel option available for pending claims
- [ ] Claim is withdrawn
- [ ] Shift returns to available pool
- [ ] Confirmation shown

---

### TC-16.3.7: Manager View Claim Requests

**Steps:**
1. Log in as admin/manager
2. Navigate to open shift claims management
3. View pending claim requests

**Expected Results:**
- [ ] All pending claims are listed
- [ ] Shows requesting employee for each
- [ ] Shows shift details
- [ ] Approve/Deny actions available

---

### TC-16.3.8: Manager Approve Claim

**Steps:**
1. Log in as manager
2. Navigate to claims queue
3. Approve a claim request

**Expected Results:**
- [ ] Claim is approved
- [ ] Shift assigned to employee
- [ ] Other claims for same shift denied/withdrawn
- [ ] Employee notified

---

### TC-16.3.9: Manager Deny Claim

**Steps:**
1. Log in as manager
2. Navigate to claims queue
3. Deny a claim request
4. Optionally provide reason

**Expected Results:**
- [ ] Claim is denied
- [ ] Shift remains open
- [ ] Employee notified of denial
- [ ] Reason shown (if provided)

---

### TC-16.3.10: Auto-Approve Option (Tenant Setting)

**Steps:**
1. Enable auto-approve for open shifts in tenant settings
2. Employee claims an open shift
3. Observe approval process

**Expected Results:**
- [ ] Auto-approve setting exists
- [ ] Eligible claims approved automatically
- [ ] Shift assigned immediately
- [ ] No manager intervention needed

---

### TC-16.3.11: Priority Rules (Seniority)

**Steps:**
1. Configure priority by seniority
2. Multiple employees claim same shift
3. Manager views claims queue

**Expected Results:**
- [ ] Claims sorted by seniority
- [ ] More senior employees shown first
- [ ] Priority indicator visible
- [ ] Manager can override priority

---

### TC-16.3.12: Priority Rules (Hours Balance)

**Steps:**
1. Configure priority by hours balance
2. Multiple employees claim same shift
3. Observe priority order

**Expected Results:**
- [ ] Employees with fewer hours prioritized
- [ ] Hours balance shown in claims
- [ ] Helps distribute hours fairly

---

### TC-16.3.13: Notification for New Open Shifts

**Steps:**
1. Configure notifications for open shifts
2. Create a new open shift
3. Check employee notifications

**Expected Results:**
- [ ] Qualified employees notified
- [ ] Notification includes shift details
- [ ] Link to claim the shift
- [ ] Only relevant employees notified

---

### TC-16.3.14: Auto-Assign After Deadline

**Steps:**
1. Enable auto-assign feature
2. Create open shift with claim deadline
3. Have employees claim the shift
4. Wait for deadline to pass

**Expected Results:**
- [ ] After deadline, top priority claim is auto-assigned
- [ ] Shift no longer shows as open
- [ ] Employees notified of result
- [ ] Feature can be disabled per tenant

---

### TC-16.3.15: No Eligible Employees

**Steps:**
1. Create open shift requiring rare qualification
2. View the shift as employee without qualification

**Expected Results:**
- [ ] Shift not visible to unqualified employees
- [ ] Admin sees shift has no eligible claimants
- [ ] Clear indication of qualification requirements

---

## Notes

- Record any bugs or issues found during testing
- Note the browser and device used for testing
- Screenshot any unexpected behavior
- Verify fairness of claim priority system
