# UAT: Feature 3.6 - Auto Clock-Out

## Test Environment Setup

**Prerequisites:**
- One admin user
- Multiple employee users
- Employees currently clocked in
- Tenant with auto clock-out enabled
- Auto clock-out time configured (e.g., 23:59)

**Test URLs:**
- Time Entries: `/time-entries`
- Settings: `/settings`

---

## Test Cases

### TC-3.6.1: Auto Clock-Out at Configured Time

**Steps:**
1. Log in as admin
2. Configure auto clock-out for 23:59
3. Have employee clock in and forget to clock out
4. Wait until after 23:59 (or adjust test time)
5. Check time entries

**Expected Results:**
- [ ] Employee is automatically clocked out
- [ ] Clock-out time is the configured time
- [ ] Status shows "auto_clocked_out"
- [ ] Entry complete with actual duration

---

### TC-3.6.2: Auto Clock-Out Only When Enabled

**Steps:**
1. Log in as admin
2. Disable auto clock-out in tenant settings
3. Have employee remain clocked in past midnight
4. Check time entries next day

**Expected Results:**
- [ ] Employee remains clocked in
- [ ] No automatic clock-out occurred
- [ ] Entry still shows "in_progress"
- [ ] Manual clock-out required

---

### TC-3.6.3: Note Added for Auto Clock-Out

**Steps:**
1. Trigger auto clock-out scenario
2. View the time entry

**Expected Results:**
- [ ] Note indicates "Automatically clocked out"
- [ ] System note, not user-editable
- [ ] Clear reason for the clock-out
- [ ] Timestamp of auto action

---

### TC-3.6.4: Multiple Employees Auto Clocked Out

**Steps:**
1. Have 3 employees remain clocked in
2. Let auto clock-out time pass
3. Check all time entries

**Expected Results:**
- [ ] All 3 employees clocked out
- [ ] Each has separate entry
- [ ] Same clock-out time for all
- [ ] All marked as auto_clocked_out

---

### TC-3.6.5: Employee on Break Auto Clocked Out

**Steps:**
1. Have employee clock in and start break
2. Employee forgets to end break and clock out
3. Auto clock-out time passes

**Expected Results:**
- [ ] Employee clocked out automatically
- [ ] Break is ended automatically
- [ ] Break time calculated appropriately
- [ ] Note indicates break was active

---

### TC-3.6.6: Already Clocked Out - No Action

**Steps:**
1. Have employee clock in and clock out normally at 17:00
2. Auto clock-out time is 23:59
3. Check entry after 23:59

**Expected Results:**
- [ ] No change to existing entry
- [ ] Status remains "completed"
- [ ] Clock-out time still 17:00
- [ ] No duplicate clock-out

---

### TC-3.6.7: Configure Auto Clock-Out Time

**Steps:**
1. Log in as admin
2. Navigate to tenant settings
3. Find auto clock-out settings
4. Change time from 23:59 to 22:00
5. Save

**Expected Results:**
- [ ] Setting saves successfully
- [ ] New time takes effect
- [ ] Validation for valid time
- [ ] Format is correct (24-hour or AM/PM)

---

### TC-3.6.8: Disable Auto Clock-Out

**Steps:**
1. Log in as admin
2. Navigate to settings
3. Toggle auto clock-out OFF
4. Save

**Expected Results:**
- [ ] Feature disabled successfully
- [ ] No auto clock-outs occur
- [ ] Setting persists
- [ ] Can re-enable later

---

### TC-3.6.9: Scheduler Command Runs Correctly

**Steps:**
1. Log in as admin (or check server logs)
2. Verify AutoClockOutCommand is scheduled

**Expected Results:**
- [ ] Command runs at configured time
- [ ] Processes all applicable entries
- [ ] Logs actions taken
- [ ] Handles errors gracefully

---

### TC-3.6.10: Auto Clock-Out Respects Timezone

**Steps:**
1. Configure tenant timezone
2. Set auto clock-out for 23:00
3. Verify execution time

**Expected Results:**
- [ ] 23:00 is in tenant's timezone
- [ ] Not server timezone
- [ ] Correct for all tenant locations
- [ ] DST changes handled

---

### TC-3.6.11: Manager Review of Auto Clock-Outs

**Steps:**
1. Trigger auto clock-out
2. Log in as admin
3. Filter time entries by status "auto_clocked_out"

**Expected Results:**
- [ ] Can filter by auto clock-out status
- [ ] Easy to review missed clock-outs
- [ ] Can adjust times if needed
- [ ] Adjustment requires reason

---

### TC-3.6.12: Employee Notification of Auto Clock-Out

**Steps:**
1. Trigger auto clock-out for an employee
2. Next day, employee logs in
3. Check for notification

**Expected Results:**
- [ ] Employee sees notification
- [ ] "You were automatically clocked out"
- [ ] Shows the date and time
- [ ] Prompts to verify hours

---

## Notes

- Record any bugs or issues found during testing
- Note the browser and device used for testing
- Screenshot any unexpected behavior
- Test with various time configurations
