# UAT: Feature 3.1 - Clock In/Out Core System

## Test Environment Setup

**Prerequisites:**
- One admin user
- Multiple employee users with assigned shifts
- Published shifts for today and upcoming days
- Tenant with clock-in feature enabled
- GPS settings configured (optional)

**Test URLs:**
- Time Entries: `/time-entries`
- Dashboard: `/dashboard`

---

## Test Cases

### TC-3.1.1: Employee Clocks In Successfully

**Steps:**
1. Log in as an employee with a shift starting within grace period
2. Navigate to dashboard or clock widget
3. Click "Clock In" button

**Expected Results:**
- [ ] Clock-in is recorded successfully
- [ ] Timestamp captured accurately
- [ ] Status changes to "Clocked In"
- [ ] Success message displayed
- [ ] Elapsed time starts counting

---

### TC-3.1.2: Clock In - No Shift Scheduled

**Steps:**
1. Log in as an employee with NO shift today
2. Try to click "Clock In"

**Expected Results:**
- [ ] Warning shown: "No shift scheduled"
- [ ] Option to clock in anyway (if allowed) OR
- [ ] Clock-in prevented
- [ ] Clear messaging about no scheduled shift

---

### TC-3.1.3: Clock In - Outside Grace Period (Too Early)

**Steps:**
1. Log in as an employee
2. Find a shift starting in 2 hours
3. Try to clock in now

**Expected Results:**
- [ ] Message: "Too early to clock in"
- [ ] Shows when clock-in will be available
- [ ] Clock-in prevented if outside grace period
- [ ] Grace period setting respected

---

### TC-3.1.4: Clock In - Already Clocked In

**Steps:**
1. Log in as an employee
2. Clock in successfully
3. Try to click "Clock In" again

**Expected Results:**
- [ ] Button disabled or hidden
- [ ] Message: "Already clocked in"
- [ ] No duplicate time entry created
- [ ] Current status clearly shown

---

### TC-3.1.5: Employee Clocks Out Successfully

**Steps:**
1. Log in as an employee who is currently clocked in
2. Click "Clock Out" button
3. Confirm if prompted

**Expected Results:**
- [ ] Clock-out is recorded
- [ ] Timestamp captured
- [ ] Status changes to "Clocked Out"
- [ ] Total worked time displayed
- [ ] Success message shown

---

### TC-3.1.6: Clock Out - Not Clocked In

**Steps:**
1. Log in as an employee who is not clocked in
2. Look for clock out option

**Expected Results:**
- [ ] Clock Out button disabled or hidden
- [ ] Only Clock In option available
- [ ] Clear status indication

---

### TC-3.1.7: Start Break

**Steps:**
1. Log in as an employee who is clocked in
2. Click "Start Break" button

**Expected Results:**
- [ ] Break status is recorded
- [ ] Status changes to "On Break"
- [ ] Break timer starts
- [ ] Work timer pauses
- [ ] Break start time recorded

---

### TC-3.1.8: End Break

**Steps:**
1. Log in as an employee on break
2. Click "End Break" button

**Expected Results:**
- [ ] Break ends, status returns to "Working"
- [ ] Break duration recorded
- [ ] Work timer resumes
- [ ] Total break time tracked
- [ ] Can take another break later

---

### TC-3.1.9: View Time Entry Details

**Steps:**
1. Log in as an employee
2. Complete a full shift (clock in, break, clock out)
3. View time entries list
4. Click on the completed entry

**Expected Results:**
- [ ] Entry shows clock-in time
- [ ] Entry shows clock-out time
- [ ] Entry shows break duration
- [ ] Entry shows total worked hours
- [ ] Entry shows associated shift (if any)

---

### TC-3.1.10: Admin View All Time Entries

**Steps:**
1. Log in as an admin
2. Navigate to Time Entries

**Expected Results:**
- [ ] Shows all employees' time entries
- [ ] Can filter by employee
- [ ] Can filter by date range
- [ ] Can filter by status
- [ ] Pagination works

---

### TC-3.1.11: Admin Adjusts Time Entry

**Steps:**
1. Log in as an admin
2. Navigate to Time Entries
3. Find an employee's entry
4. Click "Adjust" or "Edit"
5. Change clock-in time by 15 minutes
6. Enter reason for adjustment
7. Save

**Expected Results:**
- [ ] Adjustment form available
- [ ] Reason field is required
- [ ] Times can be modified
- [ ] Original times preserved in audit
- [ ] Adjustment recorded with admin's name

---

### TC-3.1.12: Manager Approval Workflow

**Steps:**
1. Configure tenant to require manager approval
2. Employee completes shift and clocks out
3. Log in as admin/manager
4. Find pending time entry
5. Approve the entry

**Expected Results:**
- [ ] Entry shows "Pending Approval" status
- [ ] Approve button visible to managers
- [ ] Entry changes to "Approved" status
- [ ] Approved_by and approved_at recorded
- [ ] Employee sees approval status

---

### TC-3.1.13: Reject Time Entry

**Steps:**
1. Configure tenant to require approval
2. Find pending time entry
3. Click "Reject" button
4. Enter rejection reason

**Expected Results:**
- [ ] Entry status changes to "Rejected"
- [ ] Rejection reason recorded
- [ ] Employee notified of rejection
- [ ] Entry may be adjusted and resubmitted

---

### TC-3.1.14: GPS Location Capture (If Enabled)

**Steps:**
1. Configure tenant to require GPS on clock-in
2. Log in as employee on mobile device
3. Allow location permissions
4. Clock in

**Expected Results:**
- [ ] Location permission requested
- [ ] GPS coordinates captured
- [ ] Location saved with time entry
- [ ] Admin can view clock-in location
- [ ] Handles location denied gracefully

---

### TC-3.1.15: Current Status API Endpoint

**Steps:**
1. Log in as an employee
2. Check current clock status
3. Refresh dashboard

**Expected Results:**
- [ ] API returns current status (clocked_in/out/on_break)
- [ ] Returns current time entry details if active
- [ ] Returns elapsed time
- [ ] Widget updates correctly

---

## Notes

- Record any bugs or issues found during testing
- Note the browser and device used for testing
- Screenshot any unexpected behavior
- Test on both desktop and mobile devices
- Verify timezone handling is correct
