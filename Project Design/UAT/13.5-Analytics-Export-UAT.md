# UAT: Feature 13.5 - Analytics Export

## Test Environment Setup

**Prerequisites:**
- SuperAdmin user account
- Existing revenue, subscription, and tenant data
- Email service configured for scheduled reports

**Test URL:** `/super-admin/analytics/export`

---

## Test Cases

### TC-13.5.1: Access Analytics Export (SuperAdmin)

**Steps:**
1. Log in as a SuperAdmin
2. Navigate to "Analytics" in the super-admin sidebar
3. Click on "Export" or find export options

**Expected Results:**
- [ ] Export interface is accessible
- [ ] Available export types are listed
- [ ] Date range selector is present
- [ ] Export format options shown

---

### TC-13.5.2: Non-SuperAdmin Cannot Access

**Steps:**
1. Log in as a regular admin or employee
2. Try to access analytics export functionality

**Expected Results:**
- [ ] Access is denied (403 error)
- [ ] Export options not visible to non-SuperAdmins

---

### TC-13.5.3: Export Revenue Data to CSV

**Steps:**
1. Log in as SuperAdmin
2. Navigate to Analytics Export
3. Select "Revenue Data" export type
4. Select date range (e.g., last 3 months)
5. Choose CSV format
6. Click Export/Download

**Expected Results:**
- [ ] CSV file is generated
- [ ] File downloads successfully
- [ ] Contains MRR, ARR, revenue by plan
- [ ] Date range is respected
- [ ] Data matches dashboard values

---

### TC-13.5.4: Export Subscription Data to CSV

**Steps:**
1. Log in as SuperAdmin
2. Navigate to Analytics Export
3. Select "Subscription Data" export type
4. Select date range
5. Choose CSV format
6. Click Export/Download

**Expected Results:**
- [ ] CSV file is generated
- [ ] File downloads successfully
- [ ] Contains subscription counts, statuses, plans
- [ ] Trial conversion data included
- [ ] Data is accurate

---

### TC-13.5.5: Date Range Selection

**Steps:**
1. Log in as SuperAdmin
2. Navigate to Analytics Export
3. Test various date ranges:
   - Last 30 days
   - Last quarter
   - Custom date range
   - Year to date

**Expected Results:**
- [ ] All preset ranges work correctly
- [ ] Custom date picker functions properly
- [ ] Invalid ranges show error message
- [ ] Future dates are handled appropriately

---

### TC-13.5.6: Scheduled Email Reports Setup

**Steps:**
1. Log in as SuperAdmin
2. Navigate to Analytics Export
3. Set up a scheduled email report
4. Configure frequency (weekly/monthly)
5. Add recipient email addresses
6. Save configuration

**Expected Results:**
- [ ] Scheduled report option is available
- [ ] Frequency options work (daily, weekly, monthly)
- [ ] Multiple recipients can be added
- [ ] Configuration saves successfully
- [ ] Confirmation shown

---

### TC-13.5.7: Receive Scheduled Email Report

**Steps:**
1. Set up a scheduled report (or trigger manually for testing)
2. Wait for scheduled time or trigger report
3. Check email inbox

**Expected Results:**
- [ ] Email is received at scheduled time
- [ ] Email contains correct report period
- [ ] Attachment is present and valid
- [ ] Email formatting is professional

---

### TC-13.5.8: Modify Scheduled Report

**Steps:**
1. Log in as SuperAdmin
2. Navigate to scheduled reports list
3. Edit an existing scheduled report
4. Change frequency or recipients
5. Save changes

**Expected Results:**
- [ ] Existing reports are listed
- [ ] Edit function works
- [ ] Changes are saved
- [ ] Updated schedule takes effect

---

### TC-13.5.9: Delete Scheduled Report

**Steps:**
1. Log in as SuperAdmin
2. Navigate to scheduled reports list
3. Delete a scheduled report
4. Confirm deletion

**Expected Results:**
- [ ] Delete option is available
- [ ] Confirmation is required
- [ ] Report is removed from list
- [ ] Scheduled emails stop

---

### TC-13.5.10: Export with No Data

**Steps:**
1. Log in as SuperAdmin
2. Select a date range with no data
3. Attempt to export

**Expected Results:**
- [ ] Handles empty data gracefully
- [ ] Either shows message or exports empty file
- [ ] No errors or crashes
- [ ] Clear indication of no data

---

### TC-13.5.11: Large Data Export

**Steps:**
1. Log in as SuperAdmin
2. Select a large date range (full year)
3. Export comprehensive data

**Expected Results:**
- [ ] Export handles large datasets
- [ ] Progress indicator shown if lengthy
- [ ] File generates successfully
- [ ] No timeout errors

---

### TC-13.5.12: Export File Naming

**Steps:**
1. Log in as SuperAdmin
2. Export various data types
3. Check downloaded file names

**Expected Results:**
- [ ] File names are descriptive
- [ ] Include date range in filename
- [ ] Include data type in filename
- [ ] Files have correct extension (.csv)

---

## Notes

- Record any bugs or issues found during testing
- Note the browser and device used for testing
- Screenshot any unexpected behavior
- Verify exported data opens correctly in spreadsheet software
