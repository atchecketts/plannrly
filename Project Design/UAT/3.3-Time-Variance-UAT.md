# UAT: Feature 3.3 - Scheduled vs Actual Time Variance

## Test Environment Setup

**Prerequisites:**
- One admin user
- Multiple employee users
- Completed time entries with various variances
- Published shifts with known start/end times
- Employees who clocked in early, on time, late

**Test URLs:**
- Time Entries: `/time-entries`
- Timesheets: `/timesheets`

---

## Test Cases

### TC-3.3.1: Calculate Actual Duration

**Steps:**
1. Log in as admin
2. View a completed time entry
3. Check actual duration calculation

**Expected Results:**
- [ ] Actual duration calculated correctly
- [ ] Based on clock-in to clock-out times
- [ ] Break time deducted
- [ ] Shows hours and minutes

---

### TC-3.3.2: Calculate Scheduled Duration

**Steps:**
1. Log in as admin
2. View a time entry linked to a shift
3. Check scheduled duration

**Expected Results:**
- [ ] Scheduled duration from shift times
- [ ] Matches shift start/end
- [ ] Break time may be deducted (per policy)
- [ ] Displayed alongside actual

---

### TC-3.3.3: Calculate Total Variance

**Steps:**
1. Log in as admin
2. Find entry: Scheduled 8 hrs, Actual 8.5 hrs
3. View variance

**Expected Results:**
- [ ] Variance shows +30 minutes
- [ ] Positive indicates overtime
- [ ] Negative would indicate undertime
- [ ] Variance clearly labeled

---

### TC-3.3.4: Clock-In Variance (Late Arrival)

**Steps:**
1. Log in as admin
2. Find entry where employee clocked in 15 min after shift start
3. View clock-in variance

**Expected Results:**
- [ ] Shows "15 minutes late"
- [ ] Late arrival flagged
- [ ] Color coding (red/orange)
- [ ] isLate attribute is true

---

### TC-3.3.5: Clock-In Variance (Early Arrival)

**Steps:**
1. Log in as admin
2. Find entry where employee clocked in 10 min before shift
3. View clock-in variance

**Expected Results:**
- [ ] Shows "10 minutes early"
- [ ] May or may not be flagged
- [ ] Different from late arrival indicator
- [ ] Early time may count toward hours

---

### TC-3.3.6: Clock-Out Variance (Early Departure)

**Steps:**
1. Log in as admin
2. Find entry where employee left 20 min before shift end
3. View clock-out variance

**Expected Results:**
- [ ] Shows "20 minutes early"
- [ ] Early departure flagged
- [ ] isEarlyDeparture attribute is true
- [ ] Color coding applied

---

### TC-3.3.7: Clock-Out Variance (Overtime)

**Steps:**
1. Log in as admin
2. Find entry where employee stayed 45 min past shift end
3. View clock-out variance

**Expected Results:**
- [ ] Shows "+45 minutes overtime"
- [ ] Overtime flagged
- [ ] isOvertime attribute is true
- [ ] May affect pay calculations

---

### TC-3.3.8: No-Show Detection

**Steps:**
1. Log in as admin
2. Find a shift that passed with no time entry
3. View the missed shift indicator

**Expected Results:**
- [ ] Shift marked as "Missed" or "No-Show"
- [ ] isNoShow attribute is true
- [ ] Listed in missed shifts report
- [ ] Manager notified (if configured)

---

### TC-3.3.9: Variance Color Coding in List

**Steps:**
1. Log in as admin
2. Navigate to time entries list
3. View multiple entries with varying statuses

**Expected Results:**
- [ ] On-time entries show green or neutral
- [ ] Late arrivals show yellow/orange
- [ ] Significant late (>15 min) show red
- [ ] Overtime show different color
- [ ] Color legend available

---

### TC-3.3.10: Variance Summary for Employee

**Steps:**
1. Log in as admin
2. View specific employee's timesheet
3. Check variance summary

**Expected Results:**
- [ ] Shows total late minutes
- [ ] Shows total overtime
- [ ] Shows attendance percentage
- [ ] Shows average variance

---

### TC-3.3.11: Employee Views Own Variance

**Steps:**
1. Log in as an employee
2. View own time entries
3. Check variance information

**Expected Results:**
- [ ] Employee can see own variances
- [ ] Shows late/early indicators
- [ ] Shows actual vs scheduled
- [ ] No access to other employees' data

---

### TC-3.3.12: Variance Threshold Settings

**Steps:**
1. Log in as admin
2. Check tenant settings for variance thresholds
3. Verify color coding matches thresholds

**Expected Results:**
- [ ] Grace period configurable (e.g., 5 min)
- [ ] Warning threshold configurable
- [ ] Critical threshold configurable
- [ ] Colors applied per thresholds

---

### TC-3.3.13: Variance in Time Entry Detail View

**Steps:**
1. Log in as admin
2. Click on a specific time entry
3. View full detail page

**Expected Results:**
- [ ] Shows scheduled times
- [ ] Shows actual times
- [ ] Shows variance breakdown
- [ ] Visual timeline comparison

---

### TC-3.3.14: Variance Handles Unscheduled Shifts

**Steps:**
1. Log in as employee
2. Clock in without a scheduled shift
3. Complete work and clock out
4. View time entry

**Expected Results:**
- [ ] No scheduled duration shown
- [ ] Actual duration still calculated
- [ ] No variance calculation (N/A)
- [ ] Entry marked as unscheduled

---

### TC-3.3.15: Variance with Break Time

**Steps:**
1. Log in as employee
2. Clock in, take 30-min break, clock out
3. Check variance calculation

**Expected Results:**
- [ ] Break time properly deducted
- [ ] Actual work time excludes break
- [ ] Scheduled may include break allowance
- [ ] Variance calculated on net hours

---

## Notes

- Record any bugs or issues found during testing
- Note the browser and device used for testing
- Screenshot any unexpected behavior
- Verify calculations are accurate with manual checks
