# UAT: 3.1 Clock In/Out Core System

**Feature:** Clock In/Out Core System
**Status:** Ready for Testing
**Implemented:** 2026-01-29

## Prerequisites

1. User is logged into the application
2. Tenant has "Enable Clock In/Out" setting enabled in Settings
3. Employee has at least one shift assigned for today

## Test Cases

### TC-3.1.1: Enable Clock In/Out Feature

**Steps:**
1. Log in as Admin
2. Navigate to Settings
3. Enable "Enable Clock In/Out" checkbox
4. Save settings

**Expected Result:**
- "Time Clock" link appears in the sidebar navigation
- Clock widget appears on employee dashboard

---

### TC-3.1.2: Employee Clock In

**Preconditions:** Employee has a published shift for today

**Steps:**
1. Log in as Employee
2. Navigate to Time Clock (or view Dashboard)
3. Observe clock widget shows "Ready to clock in?"
4. Select shift from dropdown
5. Click "Clock In" button

**Expected Result:**
- Success message: "Successfully clocked in at [time]"
- Widget shows "Clocked In" status with live timer
- "Start Break" and "Clock Out" buttons visible
- Time entry created in database

---

### TC-3.1.3: Prevent Double Clock In

**Preconditions:** Employee is already clocked in

**Steps:**
1. Open a new browser tab
2. Navigate to Time Clock
3. Try to clock in to another shift

**Expected Result:**
- Error message: "You are already clocked in."
- No duplicate time entry created

---

### TC-3.1.4: Start and End Break

**Preconditions:** Employee is clocked in

**Steps:**
1. Click "Start Break" button
2. Observe status changes to "On Break"
3. Wait a moment
4. Click "End Break" button

**Expected Result:**
- Break time is recorded
- Status returns to "Clocked In"
- Break duration added to total break minutes

---

### TC-3.1.5: Clock Out

**Preconditions:** Employee is clocked in

**Steps:**
1. Click "Clock Out" button

**Expected Result:**
- Success message: "Successfully clocked out at [time]. Total worked: [hours] hours."
- Widget shows "No Shifts Today" or next available shift
- Time entry marked as clocked out

---

### TC-3.1.6: Auto End Break on Clock Out

**Preconditions:** Employee is on break

**Steps:**
1. Click "Clock Out" button while on break

**Expected Result:**
- Break is automatically ended
- Clock out is processed
- Total break time recorded correctly

---

### TC-3.1.7: Employee View Own Time Entries

**Steps:**
1. Log in as Employee
2. Navigate to Time Clock

**Expected Result:**
- Only own time entries are displayed
- Cannot see other employees' entries
- Entries show date, times, duration, status

---

### TC-3.1.8: Manager View All Time Entries

**Steps:**
1. Log in as Admin/Manager
2. Navigate to Time Clock

**Expected Result:**
- All team time entries visible
- Can filter by status, date range
- Can filter pending approval entries

---

### TC-3.1.9: Manager Adjust Time Entry

**Steps:**
1. Log in as Admin
2. Navigate to Time Clock
3. Click "View" on any time entry
4. Scroll to "Adjust Time Entry" section
5. Change clock in time
6. Enter adjustment reason (min 10 characters)
7. Click "Save Adjustment"

**Expected Result:**
- Success message displayed
- Time entry updated with new times
- Adjustment reason saved

---

### TC-3.1.10: Adjustment Requires Reason

**Steps:**
1. Try to adjust with short reason (< 10 chars)

**Expected Result:**
- Validation error: "The adjustment reason must be at least 10 characters."

---

### TC-3.1.11: Manager Approve Time Entry

**Preconditions:** "Require Manager Approval" is enabled in settings

**Steps:**
1. Log in as Admin
2. Navigate to Time Clock
3. Filter by "Pending Approval"
4. View a pending entry
5. Click "Approve Time Entry"

**Expected Result:**
- Success message: "Time entry approved successfully."
- Entry shows "Approved" badge
- Approval timestamp and approver recorded

---

### TC-3.1.12: Employee Cannot Approve

**Steps:**
1. Log in as Employee
2. Try to access approve endpoint directly (via URL)

**Expected Result:**
- 403 Forbidden error
- Employee cannot approve entries

---

### TC-3.1.13: Employee Cannot Adjust

**Steps:**
1. Log in as Employee
2. Try to access adjust endpoint directly

**Expected Result:**
- 403 Forbidden error
- Employee cannot adjust entries

---

### TC-3.1.14: GPS Required Validation

**Preconditions:** "Require GPS Location" is enabled in settings

**Steps:**
1. Log in as Employee
2. Try to clock in without location data

**Expected Result:**
- Validation error: "GPS location is required to clock in."

---

### TC-3.1.15: Clock In with GPS

**Preconditions:** "Require GPS Location" is enabled

**Steps:**
1. Allow browser location access
2. Clock in

**Expected Result:**
- Location captured and stored with time entry
- Location visible in time entry details

---

### TC-3.1.16: Tenant Isolation

**Steps:**
1. Create time entry in Tenant A
2. Log in as Admin from Tenant B
3. Try to access Tenant A's time entry

**Expected Result:**
- 404 Not Found (entry doesn't exist for this tenant)
- Cannot see or modify other tenants' data

---

### TC-3.1.17: Feature Disabled

**Preconditions:** Clock In/Out disabled in settings

**Steps:**
1. Navigate to sidebar

**Expected Result:**
- "Time Clock" link not visible
- Clock widget not shown on dashboard

---

### TC-3.1.18: Clock Widget Live Timer

**Steps:**
1. Clock in
2. Observe timer on widget

**Expected Result:**
- Timer updates every second
- Shows hours, minutes, seconds elapsed
- Continues counting even after page idle

---

### TC-3.1.19: Time Entry Index Filters

**Steps:**
1. Log in as Admin
2. Navigate to Time Clock
3. Test each filter:
   - Status (Clocked In, On Break, Clocked Out)
   - Date From
   - Date To
   - Pending Approval checkbox

**Expected Result:**
- Filters work correctly
- Results update based on selections
- Clear link resets all filters

---

### TC-3.1.20: Clock Settings UI

**Steps:**
1. Log in as Admin
2. Navigate to Settings
3. Enable Clock In/Out
4. Observe expanded settings section

**Expected Result:**
- Additional settings appear:
  - Clock In Grace Period
  - Overtime Threshold
  - Require GPS Location
  - Require Manager Approval
  - Enable Auto Clock Out
  - Auto Clock Out Time

---

## Verification Checklist

| Test Case | Pass | Fail | Notes |
|-----------|------|------|-------|
| TC-3.1.1 Enable Feature | | | |
| TC-3.1.2 Clock In | | | |
| TC-3.1.3 No Double Clock In | | | |
| TC-3.1.4 Break Tracking | | | |
| TC-3.1.5 Clock Out | | | |
| TC-3.1.6 Auto End Break | | | |
| TC-3.1.7 Employee View | | | |
| TC-3.1.8 Manager View | | | |
| TC-3.1.9 Adjust Entry | | | |
| TC-3.1.10 Reason Required | | | |
| TC-3.1.11 Approve Entry | | | |
| TC-3.1.12 Employee No Approve | | | |
| TC-3.1.13 Employee No Adjust | | | |
| TC-3.1.14 GPS Required | | | |
| TC-3.1.15 GPS Capture | | | |
| TC-3.1.16 Tenant Isolation | | | |
| TC-3.1.17 Feature Disabled | | | |
| TC-3.1.18 Live Timer | | | |
| TC-3.1.19 Index Filters | | | |
| TC-3.1.20 Clock Settings | | | |

## Sign-off

**Tested By:** _______________________
**Date:** _______________________
**Result:** [ ] Pass  [ ] Fail  [ ] Partial
**Notes:**
