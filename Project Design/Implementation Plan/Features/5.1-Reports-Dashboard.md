# Feature 5.1: Reports Dashboard

**Status:** Not Started
**Effort:** Large
**Phase:** 5 - Reports & Analytics

## Overview

Create a comprehensive reports dashboard that provides insights into hours worked, labor costs, schedule adherence, and leave usage. The dashboard will include chart visualizations and export functionality.

## Requirements

### Functional Requirements
- Admins can access a reports dashboard with summary metrics
- Generate hours worked report by employee, department, or period
- Generate labor costs report using hourly rates
- Generate schedule adherence report comparing actual vs scheduled hours
- Generate leave usage report
- Display data through chart visualizations
- Export reports to CSV and PDF formats

### Business Rules
- Only admins can access reports
- Reports should support date range filtering
- Labor costs should use the pay rate hierarchy (role-specific > user base rate > role default)
- All report data should be exportable

## Files

### To Create
- `app/Http/Controllers/ReportController.php`
- `resources/views/reports/index.blade.php`
- `resources/views/reports/hours.blade.php`
- `resources/views/reports/labor-costs.blade.php`
- `resources/views/reports/leave.blade.php`
- `tests/Feature/ReportsTest.php`

### Routes
```php
Route::get('reports', [ReportController::class, 'index'])->name('reports.index');
Route::get('reports/hours', [ReportController::class, 'hours'])->name('reports.hours');
Route::get('reports/labor-costs', [ReportController::class, 'laborCosts'])->name('reports.labor-costs');
Route::get('reports/leave', [ReportController::class, 'leave'])->name('reports.leave');
Route::get('reports/export/{type}', [ReportController::class, 'export'])->name('reports.export');
```

## Tasks

- [ ] Create ReportController
- [ ] Create reports index/dashboard with summary cards
- [ ] Implement hours worked report (by employee, department, period)
- [ ] Implement labor costs report (using hourly rates)
- [ ] Implement schedule adherence report (actual vs scheduled)
- [ ] Implement leave usage report
- [ ] Add chart visualizations using a JavaScript charting library
- [ ] Add CSV export functionality
- [ ] Add PDF export functionality
- [ ] Add date range filtering to all reports
- [ ] Add department/location filtering
- [ ] Write tests

## Tests

Tests to be created in `tests/Feature/ReportsTest.php`:

1. `test_admin_can_access_reports_dashboard`
2. `test_employee_cannot_access_reports`
3. `test_hours_report_shows_correct_data`
4. `test_hours_report_can_filter_by_date_range`
5. `test_hours_report_can_filter_by_department`
6. `test_labor_costs_report_uses_correct_rate_hierarchy`
7. `test_labor_costs_report_shows_overtime_costs`
8. `test_schedule_adherence_report_calculates_correctly`
9. `test_leave_report_shows_usage_by_type`
10. `test_can_export_report_to_csv`
11. `test_can_export_report_to_pdf`

## Dependencies

- User model with hours/shifts relationships
- Shift model with start/end times
- LeaveRequest model with leave types
- UserEmploymentDetails model (for hourly rates)
- BusinessRole model (for role-specific rates)
