# Feature 1.2: Employee Dashboard

**Status:** Completed
**Effort:** Medium
**Phase:** 1 - Core Features

## Overview

Employees need a personalized dashboard showing their schedule, upcoming shifts, leave requests, and shift swaps. This provides a quick overview of everything relevant to the employee.

## Requirements

### Functional Requirements
- Display upcoming shifts for the next 7 days
- Show countdown timer to next shift
- Display pending leave requests
- Show active shift swap requests
- Provide quick action buttons (request leave, view schedule)
- Show summary statistics (total shifts this week, hours scheduled)

### UI Components
- Next shift countdown with visual timer
- Upcoming shifts list with date, time, location, and role
- My leave requests section with status badges
- My shift swaps section with pending/accepted status
- Quick actions panel

## Files

### Created/Modified
- `app/Http/Controllers/DashboardController.php` - Added `employeeDashboard()` method
- `resources/views/dashboard/employee.blade.php` - New employee dashboard view
- `resources/views/components/layouts/app.blade.php` - Added `@stack('scripts')` for JavaScript
- `tests/Feature/EmployeeDashboardTest.php` - 7 tests

### Routes
```php
Route::get('dashboard', [DashboardController::class, 'index'])->name('dashboard');
// The index method routes to employeeDashboard() for non-admin users
```

## Tasks

- [x] Create dedicated employee dashboard view
- [x] Show upcoming shifts for the employee (next 7 days)
- [x] Display pending leave requests
- [x] Show active shift swap requests
- [x] Add quick action buttons (request leave, view schedule)
- [x] Display next shift countdown/reminder with JavaScript timer
- [x] Update `DashboardController::employeeDashboard()` to use new view
- [x] Write tests for employee dashboard

## Data Provided to View

```php
compact(
    'upcomingShifts',    // Collection of shifts for next 7 days
    'nextShift',         // Next published shift (for countdown)
    'myLeaveRequests',   // Pending/requested leave requests
    'mySwapRequests',    // Active swap requests (sent or received)
    'stats'              // Array with shifts_this_week, hours_this_week
)
```

## Tests

All tests located in `tests/Feature/EmployeeDashboardTest.php`:

1. `test_employee_sees_employee_dashboard`
2. `test_employee_dashboard_shows_upcoming_shifts`
3. `test_employee_dashboard_shows_next_shift_countdown`
4. `test_employee_dashboard_shows_leave_requests`
5. `test_employee_dashboard_shows_swap_requests`
6. `test_employee_dashboard_shows_quick_actions`
7. `test_employee_dashboard_shows_stats`

## Dependencies

- Shift model with relationships
- LeaveRequest model
- ShiftSwapRequest model
- User model with tenant relationship
