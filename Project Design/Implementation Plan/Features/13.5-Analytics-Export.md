# Feature 13.5: Analytics Export

**Status:** Not Started
**Effort:** Small
**Phase:** 13 - SuperAdmin Analytics Dashboard

## Overview

Export analytics data for external analysis. This allows SuperAdmins to download analytics data in CSV format and optionally schedule automated email reports.

## Requirements

### Functional Requirements
- Export revenue data to CSV
- Export subscription data to CSV
- Support date range selection for exports
- Option to schedule recurring email reports
- Download immediately or receive via email

### Export Types
- Revenue report (MRR, ARR, revenue by plan)
- Subscription report (counts, statuses, conversions)
- Growth/Churn report
- Tenant health report

### UI Components
- Export button on each analytics page
- Date range selector for export
- Export format selection (CSV)
- Scheduled report configuration modal

## Files

### To Create
- `app/Exports/RevenueExport.php` - Laravel Excel export class
- `app/Exports/SubscriptionExport.php` - Laravel Excel export class
- `app/Jobs/SendScheduledAnalyticsReportJob.php` - Scheduled report job
- `tests/Feature/SuperAdmin/AnalyticsExportTest.php` - Feature tests

### Routes
```php
Route::prefix('super-admin')->group(function () {
    Route::get('analytics/export/revenue', [AnalyticsController::class, 'exportRevenue'])->name('super-admin.analytics.export.revenue');
    Route::get('analytics/export/subscriptions', [AnalyticsController::class, 'exportSubscriptions'])->name('super-admin.analytics.export.subscriptions');
    Route::post('analytics/schedule-report', [AnalyticsController::class, 'scheduleReport'])->name('super-admin.analytics.schedule-report');
});
```

## Tasks

- [ ] Create CSV export for revenue data
- [ ] Create CSV export for subscription data
- [ ] Create scheduled email reports option
- [ ] Add date range selection for exports
- [ ] Write tests

## Tests

Suggested tests for `tests/Feature/SuperAdmin/AnalyticsExportTest.php`:

1. `test_super_admin_can_export_revenue_csv`
2. `test_super_admin_can_export_subscriptions_csv`
3. `test_export_respects_date_range_filter`
4. `test_csv_contains_correct_headers`
5. `test_scheduled_report_is_created`
6. `test_scheduled_report_job_sends_email`

## Dependencies

- SuperAdminAnalyticsService (from 13.1)
- Laravel Excel package (maatwebsite/excel) or manual CSV generation
- Mail system for scheduled reports
