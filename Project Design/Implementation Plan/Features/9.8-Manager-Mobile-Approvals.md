# Feature 9.8: Manager Mobile Approvals

**Status:** Not Started
**Effort:** Medium
**Phase:** 9 - Mobile Interface & Accessibility

## Overview

Enable managers to handle approvals from mobile devices. This feature provides a streamlined interface for managers to review and act on pending requests while on the go.

## Requirements

### Functional Requirements
- Mobile-friendly pending approvals list
- Quick approve/deny actions
- Bulk approval functionality
- Employee contact quick actions (call, message)
- Coverage at-a-glance for today
- Who's currently clocked in view
- Assign open shift functionality

### Business Rules
- Managers can only approve requests for their locations/departments
- Bulk actions respect the same permissions
- Approval actions are logged for audit

## Files

### Created/Modified
- `resources/views/manager/mobile/approvals.blade.php` - Pending approvals list
- `resources/views/manager/mobile/coverage.blade.php` - Today's coverage view
- `resources/views/manager/mobile/clocked-in.blade.php` - Who's clocked in
- `resources/views/components/approval-card.blade.php` - Swipeable approval card

### Routes
```php
Route::prefix('manager/mobile')->middleware(['auth', 'role:manager'])->group(function () {
    Route::get('approvals', [ManagerMobileController::class, 'approvals'])
        ->name('manager.mobile.approvals');
    Route::post('approvals/bulk', [ManagerMobileController::class, 'bulkApprove'])
        ->name('manager.mobile.approvals.bulk');
    Route::get('coverage', [ManagerMobileController::class, 'coverage'])
        ->name('manager.mobile.coverage');
    Route::get('clocked-in', [ManagerMobileController::class, 'clockedIn'])
        ->name('manager.mobile.clocked-in');
    Route::post('assign-shift/{shift}', [ManagerMobileController::class, 'assignShift'])
        ->name('manager.mobile.assign-shift');
});
```

## Tasks

- [ ] Create mobile-friendly pending approvals list
- [ ] Add quick approve/deny actions
- [ ] Implement bulk approval functionality
- [ ] Add employee contact quick actions (call, message)
- [ ] Create coverage at-a-glance for today
- [ ] Show who's currently clocked in
- [ ] Add assign open shift functionality
- [ ] Test approval workflows on mobile

## Tests

Tests to be created in `tests/Feature/ManagerMobileApprovalsTest.php`:

1. `test_manager_can_view_pending_approvals`
2. `test_manager_can_approve_request`
3. `test_manager_can_deny_request`
4. `test_manager_can_bulk_approve`
5. `test_coverage_view_shows_today_status`
6. `test_clocked_in_view_shows_active_employees`
7. `test_manager_can_assign_open_shift`
8. `test_non_manager_cannot_access_approvals`

## Dependencies

- Feature 9.5: Mobile Bottom Navigation
- Feature 9.6: Pull-to-Refresh & Swipe Actions
- LeaveRequest model
- ShiftSwapRequest model
- ClockEvent model
- Shift model

## Notes

- Swipe gestures should match Feature 9.6
- Contact actions use `tel:` and `sms:` links
- Consider push notifications for new requests
- Bulk actions should confirm before processing
- Coverage view helps quick staffing decisions
