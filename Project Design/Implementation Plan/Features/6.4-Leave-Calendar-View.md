# Feature 6.4: Leave Calendar View

**Status:** Not Started
**Effort:** Medium
**Phase:** 6 - Employee Management

## Overview

Create a visual calendar view showing all leave requests across the organization. This helps managers and admins see staffing availability at a glance and identify periods with multiple employees on leave.

## Requirements

### Functional Requirements
- Display calendar view showing all leave requests
- Color-code leave entries by leave type
- Show leave request status (pending, approved, rejected)
- Filter by department or location
- Navigate between months/weeks
- Click on leave entry to view details

### Business Rules
- Admins can view all leave requests in the organization
- Managers can view leave for their team/department
- Color coding should be consistent with leave type colors elsewhere in the app
- Only show relevant statuses (configurable: all, approved only, etc.)

## Files

### To Create
- `app/Http/Controllers/LeaveCalendarController.php`
- `resources/views/leave/calendar.blade.php`
- `resources/views/components/leave-calendar.blade.php`
- `tests/Feature/LeaveCalendarTest.php`

### Routes
```php
Route::get('leave/calendar', [LeaveCalendarController::class, 'index'])->name('leave.calendar');
Route::get('leave/calendar/data', [LeaveCalendarController::class, 'data'])->name('leave.calendar.data');
```

## Tasks

- [ ] Create LeaveCalendarController
- [ ] Create calendar view showing all leave requests
- [ ] Implement color-coding by leave type
- [ ] Show status indicators (pending/approved/rejected)
- [ ] Add filter by department/location
- [ ] Add filter by leave status
- [ ] Implement month/week navigation
- [ ] Create API endpoint for calendar data (JSON)
- [ ] Add click handler to view leave request details
- [ ] Add link to leave calendar in leave management section
- [ ] Write tests

## Tests

Tests to be created in `tests/Feature/LeaveCalendarTest.php`:

1. `test_admin_can_view_leave_calendar`
2. `test_manager_can_view_team_leave_calendar`
3. `test_employee_cannot_view_leave_calendar`
4. `test_calendar_shows_approved_leave`
5. `test_calendar_shows_pending_leave`
6. `test_calendar_color_codes_by_leave_type`
7. `test_calendar_can_filter_by_department`
8. `test_calendar_can_filter_by_location`
9. `test_calendar_can_filter_by_status`
10. `test_calendar_data_endpoint_returns_correct_json`

## Dependencies

- LeaveRequest model
- LeaveType model (with colors)
- Department model
- Location model
- User model with team/department relationships
