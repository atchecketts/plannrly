# Feature 3.6: Auto Clock-Out

**Status:** Deferred
**Effort:** Small
**Phase:** 3 - Time & Attendance

## Overview

Automatically clock out employees at end of day if enabled. This feature prevents employees from forgetting to clock out by automatically ending their shift at a configured time, marking the entry as auto-clocked-out.

## Requirements

### Functional Requirements
- Find all active clock-ins past the auto_clock_out_time
- Clock them out with status='auto_clocked_out'
- Add note about automatic clock-out
- Configurable per tenant via tenant_settings

### Configuration
- `auto_clock_out_enabled` - Boolean to enable/disable feature
- `auto_clock_out_time` - Time to trigger auto clock-out (default: 23:59:00)

## Files

### To Create
- `app/Console/Commands/AutoClockOutCommand.php`

### To Modify
- Console kernel (register command in scheduler)

## Tasks

- [ ] Create AutoClockOutCommand
- [ ] Find all active clock-ins past auto_clock_out_time
- [ ] Clock them out with status='auto_clocked_out'
- [ ] Add note about automatic clock-out
- [ ] Register command in scheduler (run at configured time)
- [ ] Write tests

## Command Details

```php
// Command signature
php artisan attendance:auto-clock-out

// Scheduler registration
// Runs every minute to check each tenant's configured auto_clock_out_time
Schedule::command('attendance:auto-clock-out')->everyMinute();
```

## Auto Clock-Out Logic

```
1. Get all tenants with auto_clock_out_enabled = true
2. For each tenant where current_time >= auto_clock_out_time:
   - Find all time_entries where:
     - clock_out_at IS NULL (still clocked in)
     - belongs to this tenant
   - For each entry:
     - Set clock_out_at = auto_clock_out_time
     - Set status = 'auto_clocked_out'
     - Add note: "Automatically clocked out by system"
```

## Dependencies

- TimeEntry model
- TenantSettings with auto_clock_out fields
- Laravel Scheduler
