# Feature 13.1: Revenue Reports

**Status:** Not Started
**Effort:** Large
**Phase:** 13 - SuperAdmin Analytics Dashboard

## Overview

MRR, ARR, and revenue tracking for SuperAdmin analytics. This provides comprehensive financial metrics to track subscription revenue performance across all tenants.

## Requirements

### Functional Requirements
- Display Monthly Recurring Revenue (MRR)
- Display Annual Recurring Revenue (ARR)
- Calculate and display MRR Growth month-over-month
- Show Average Revenue Per User (ARPU)
- Break down revenue by subscription plan tier
- Break down revenue by add-on features
- Support date range filtering

### Metrics to Display
| Metric | Description |
|--------|-------------|
| MRR | Monthly Recurring Revenue |
| ARR | Annual Recurring Revenue |
| MRR Growth | Month-over-month change |
| ARPU | Average Revenue Per User |
| Revenue by Plan | Breakdown by tier |
| Revenue by Add-on | Breakdown by feature |

### UI Components
- MRR/ARR summary cards with trend indicators
- MRR history chart (12 months rolling)
- Revenue by plan pie/bar chart
- Revenue by add-on chart
- Date range picker for filtering

## Files

### To Create
- `app/Services/SuperAdminAnalyticsService.php` - Analytics calculations
- `app/Http/Controllers/SuperAdmin/AnalyticsController.php` - Controller
- `resources/views/super-admin/analytics/index.blade.php` - Analytics dashboard
- `resources/views/super-admin/analytics/revenue.blade.php` - Revenue details view
- `tests/Feature/SuperAdmin/RevenueReportsTest.php` - Feature tests

### Routes
```php
Route::prefix('super-admin')->group(function () {
    Route::get('analytics', [AnalyticsController::class, 'index'])->name('super-admin.analytics.index');
    Route::get('analytics/revenue', [AnalyticsController::class, 'revenue'])->name('super-admin.analytics.revenue');
});
```

## Tasks

- [ ] Create SuperAdminAnalyticsService
- [ ] Implement MRR calculation from subscriptions
- [ ] Implement ARR calculation
- [ ] Create MRR history chart (12 months)
- [ ] Create revenue by plan chart
- [ ] Create revenue by add-on chart
- [ ] Build revenue dashboard view
- [ ] Add date range filters
- [ ] Write tests

## Tests

Suggested tests for `tests/Feature/SuperAdmin/RevenueReportsTest.php`:

1. `test_super_admin_can_view_revenue_dashboard`
2. `test_mrr_calculation_is_accurate`
3. `test_arr_calculation_is_accurate`
4. `test_mrr_growth_shows_correct_percentage`
5. `test_revenue_by_plan_breakdown_is_correct`
6. `test_revenue_by_addon_breakdown_is_correct`
7. `test_date_range_filter_works`
8. `test_regular_admin_cannot_access_super_admin_analytics`

## Dependencies

- Tenant model with subscription relationship
- Subscription model with plan and add-on relationships
- Plan model with pricing information
- Add-on model (if applicable)
