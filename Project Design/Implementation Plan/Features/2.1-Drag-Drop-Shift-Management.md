# Feature 2.1: Drag-and-Drop Shift Management

**Status:** Completed
**Effort:** Large
**Phase:** 2 - Scheduling Features

## Overview

Enable moving shifts between employees via drag-and-drop on the schedule views. This feature enhances the scheduling experience by allowing managers to quickly reassign shifts with intuitive visual interactions.

## Requirements

### Functional Requirements
- Shifts can be dragged and dropped between employee rows
- Visual feedback during drag operations (drag ghost, drop zone highlighting)
- Validation for role compatibility when dropping shifts
- Validation for shift conflicts (overlapping shifts)
- Support for both week and day schedule views
- Shift resize on day view (drag top/bottom edges to adjust times)

### Technical Requirements
- Native HTML5 drag-drop with Alpine.js (no external library)
- AJAX endpoint for shift reassignment (uses shifts.update endpoint)
- Real-time visual updates without page refresh

## Files

### Created/Modified
- `resources/views/schedule/week.blade.php` - Added drag-drop handlers
- `resources/views/schedule/day.blade.php` - Added drag-drop and resize handlers
- `app/Http/Controllers/ShiftController.php` - Update endpoint for reassignment
- Integration tests for drag-drop functionality

### Features Implemented
- Drag handlers on shift blocks
- Drop zones on employee rows
- Visual drag ghost with shift details
- Drop zone highlighting during drag
- Shift resize on day view (drag top/bottom edges)
- Role compatibility validation
- Shift conflict validation

## Tasks

- [x] Add JavaScript drag-and-drop library (SortableJS or native) - *Using native HTML5 drag-drop with Alpine.js*
- [x] Implement drag handlers on shift blocks
- [x] Implement drop zones on employee rows
- [x] Create AJAX endpoint for shift reassignment - *Uses shifts.update endpoint*
- [x] Add visual feedback during drag
- [x] Handle validation (role compatibility, shift conflicts)
- [x] Update schedule views (week and day) - *Both views support drag-drop*
- [x] Write integration tests

## Additional Features Implemented

- Shift resize on day view (drag top/bottom edges to adjust times)
- Visual drag ghost with shift details
- Drop zone highlighting during drag

## Dependencies

- Shift model with user relationship
- ShiftController with update action
- Schedule week and day views
- Alpine.js for interactivity
- User model with businessRoles relationship
